/**
 * ะขะตัั: ะฟัะพะฒะตัะบะฐ ัะตะฐะปัะฝะพะณะพ ะพัะฒะตัะฐ Starline API ะดะปั Maserati
 * ะฃะฑะตะดะธะผัั ััะพ ะฟะพะปะต "s" (ัะบะพัะพััั) ะฟัะธัััััะฒัะตั ะบะพะณะดะฐ ะผะฐัะธะฝะฐ ะดะฒะธะถะตััั
 */

console.log('๐ ะัะพะฒะตัะบะฐ ัะตะฐะปัะฝะพะณะพ ะพัะฒะตัะฐ Starline API ะดะปั Maserati\n');

// ะกะธะผัะปะธััะตะผ ะพัะฒะตั ะบะพัะพััะน ะผั ะฟะพะปััะธะปะธ ัะตัะตะท Chrome DevTools
const realApiResponse = {
  "alias": "Maserati levante SQ4 686",
  "device_id": 869573070110263,
  "position": {
    "dir": 313,
    "s": 102,  // โ ะกะะะะะกะขะฌ 102 ะบะผ/ั
    "sat_qty": 11,
    "ts": 1763094317,
    "x": 42.94388,
    "y": 42.163113
  },
  "battery": 12.8,
  "gps_lvl": 11,
  "gsm_lvl": 28,
  "status": 1
};

console.log('๐ก ะะตะฐะปัะฝัะน ะพัะฒะตั Starline API (ะฟะพะปััะตะฝ ัะตัะตะท Chrome DevTools):\n');
console.log(JSON.stringify(realApiResponse, null, 2));

// ะัะพะฒะตััะตะผ ะธะทะฒะปะตัะตะฝะธะต ัะบะพัะพััะธ
const pos = realApiResponse.position;

console.log('\nโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ');
console.log('\nโ ะะะะะะงะะะะ ะกะะะะะกะขะ:\n');

// ะกัะฐััะน ะบะพะด (ะฝะตะฟัะฐะฒะธะปัะฝะพ)
const oldSpeed = pos.speed ?? 0;
console.log(`   โ ะกัะฐััะน ะบะพะด (pos.speed): ${oldSpeed} ะบะผ/ั`);

// ะะพะฒัะน ะบะพะด (ะฟัะฐะฒะธะปัะฝะพ)
const newSpeed = pos.s ?? 0;
console.log(`   โ ะะพะฒัะน ะบะพะด (pos.s): ${newSpeed} ะบะผ/ั`);

// ะัะพะฒะตัะบะฐ
if (newSpeed === 102) {
  console.log('\n๐ ะฃะกะะะฅ! ะัะฟัะฐะฒะปะตะฝะธะต ัะฐะฑะพัะฐะตั ะบะพััะตะบัะฝะพ.');
  console.log('   ะะพัะปะต ะทะฐะฟััะบะฐ starline-monitor ัะบะพัะพััั ะฑัะดะตั ัะพััะฐะฝััััั ะฒ ะะ.');
} else {
  console.log('\nโ ะะจะะะะ! ะกะบะพัะพััั ะฝะต ะธะทะฒะปะตะบะฐะตััั.');
}

console.log('\nโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ');
console.log('\n๐ก ะกะปะตะดัััะธะต ัะฐะณะธ:');
console.log('   1. ะะพะด ัะถะต ะธัะฟัะฐะฒะปะตะฝ (pos.speed โ pos.s)');
console.log('   2. ะัะถะฝะพ ะทะฐะฟัััะธัั starline-monitor ะฝะฐ ัะตัะฒะตัะต');
console.log('   3. ะะปะธ ะดะพะถะดะฐัััั ะฐะฒัะพะผะฐัะธัะตัะบะพะณะพ ะทะฐะฟััะบะฐ (cron ะบะฐะถะดัั ะผะธะฝััั)');
console.log('   4. ะัะพะฒะตัะธัั ะะ ัะตัะตะท 1-2 ะผะธะฝััั - ัะบะพัะพััั ะฟะพัะฒะธััั');
console.log('\n๐ ะะพะผะฐะฝะดะฐ ะดะปั ะดะตะฟะปะพั:');
console.log('   cd C:\\Users\\33pok\\geodrive_n8n-agents && python deploy_fixes_now.py');

