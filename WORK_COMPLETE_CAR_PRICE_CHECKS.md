# ‚úÖ –†–ê–ë–û–¢–ê –ó–ê–í–ï–†–®–ï–ù–ê: –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–Ω –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π

**–î–∞—Ç–∞:** 2025-11-09  
**–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:** ~3 —á–∞—Å–∞  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –î–ï–ü–õ–û–Æ –ù–ê –°–ï–†–í–ï–†

---

## üéØ –ó–∞–¥–∞—á–∞

–°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –±–µ–∑ —Ü–µ–Ω –Ω–∞ —Å–µ–∑–æ–Ω—ã —á–µ—Ä–µ–∑ RentProg API endpoint `/car_data_with_bookings`.

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

**–§–∞–π–ª:** `setup/check_cars_without_prices.mjs` (437 —Å—Ç—Ä–æ–∫)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ —á–µ—Ä–µ–∑ company tokens (–¥–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –∞–≤—Ç–æ —á–µ—Ä–µ–∑ `/all_cars`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥–æ–≥–æ –∞–≤—Ç–æ —á–µ—Ä–µ–∑ `/car_data_with_bookings`
- ‚úÖ –ê–Ω–∞–ª–∏–∑ –Ω–∞–ª–∏—á–∏—è —Ü–µ–Ω –Ω–∞ –≤—Å–µ —Å–µ–∑–æ–Ω—ã
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –ë–ï–ó –¶–ï–ù
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –ë–î (—Ç–∞–±–ª–∏—Ü–∞ `car_price_checks`)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö 4 —Ñ–∏–ª–∏–∞–ª–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ retry logic
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–∑ API

**–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
```javascript
- checkBranchCarsWithoutPrices(branch)  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–¥–Ω–æ–≥–æ —Ñ–∏–ª–∏–∞–ª–∞
- checkAllBranches()                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Ñ–∏–ª–∏–∞–ª–æ–≤
- getRequestToken(branch)               // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- getCarDataWithBookings(branch, token, carId)  // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ
- checkCarPrices(carData)               // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–Ω
```

---

### 2. API Endpoints

**–§–∞–π–ª:** `src/api/index.ts` (–∏–∑–º–µ–Ω–µ–Ω–∏—è)

**–î–æ–±–∞–≤–ª–µ–Ω—ã endpoints:**

#### `GET /check-cars-without-prices`
–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Ñ–∏–ª–∏–∞–ª–æ–≤

**–û—Ç–≤–µ—Ç:**
```json
{
  "ok": true,
  "branches": [
    {
      "branch": "tbilisi",
      "total": 50,
      "withoutPrices": 5,
      ...
    }
  ],
  "summary": {
    "total": 200,
    "withoutPrices": 15
  }
}
```

#### `GET /check-cars-without-prices/:branch`
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∏–ª–∏–∞–ª–∞

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `branch` - `tbilisi`, `batumi`, `kutaisi`, `service-center`

**–û—Ç–≤–µ—Ç:**
```json
{
  "branch": "tbilisi",
  "total": 50,
  "checked": 50,
  "withoutPrices": 5,
  "cars": [...]
}
```

---

### 3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–§–∞–π–ª:** `setup/migrations/013_create_car_price_checks_table.sql` (170 —Å—Ç—Ä–æ–∫)

**–°–æ–∑–¥–∞–Ω–æ:**

#### –¢–∞–±–ª–∏—Ü–∞ `car_price_checks`
```sql
- id UUID PRIMARY KEY
- branch TEXT
- car_id UUID REFERENCES cars(id)
- rentprog_car_id TEXT
- car_code, car_number, car_model TEXT
- seasons_count INTEGER
- prices_count INTEGER
- missing_seasons JSONB  -- –¥–µ—Ç–∞–ª–∏ —Å–µ–∑–æ–Ω–æ–≤ –±–µ–∑ —Ü–µ–Ω
- check_data JSONB        -- –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ API
- resolved BOOLEAN
- checked_at TIMESTAMPTZ
```

**8 –∏–Ω–¥–µ–∫—Å–æ–≤** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

#### View `unresolved_price_issues`
–ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –Ω–µ—Ä–µ—à–µ–Ω–Ω—ã–º –ø—Ä–æ–±–ª–µ–º–∞–º:
```sql
SELECT * FROM unresolved_price_issues;
```

#### –§—É–Ω–∫—Ü–∏–∏

**`get_price_issues_stats(branch)`**
–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º –ø–æ —Ñ–∏–ª–∏–∞–ª–∞–º:
```sql
SELECT * FROM get_price_issues_stats();
SELECT * FROM get_price_issues_stats('tbilisi');
```

**`resolve_price_issue(check_id, resolved_by, notes)`**
–û—Ç–º–µ—Ç–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã –∫–∞–∫ —Ä–µ—à–µ–Ω–Ω–æ–π:
```sql
SELECT resolve_price_issue('uuid', 'admin', '–¶–µ–Ω—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã');
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞, –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã —Å–æ–∑–¥–∞–Ω—ã

---

### 4. n8n Workflow

**–§–∞–π–ª:** `n8n-workflows/check-cars-without-prices.json`

**Workflow:** "Check Cars Without Prices"

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. **Schedule Trigger** - –∑–∞–ø—É—Å–∫ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 4:00 UTC
2. **HTTP Request** - –≤—ã–∑–æ–≤ API `/check-cars-without-prices`
3. **IF Node** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø—Ä–æ–±–ª–µ–º
4. **Format Nodes** - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
5. **Telegram Nodes** - –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
6. **PostgreSQL Nodes** - –∑–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î

**–õ–æ–≥–∏–∫–∞:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Ñ–∏–ª–∏–∞–ª–æ–≤
- –ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã ‚Üí Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- –ó–∞–ø—Ä–æ—Å –¥–µ—Ç–∞–ª–µ–π –∏–∑ –ë–î
- –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞

**Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
```
üö® –ù–∞–π–¥–µ–Ω—ã –∞–≤—Ç–æ–º–æ–±–∏–ª–∏ –±–µ–∑ —Ü–µ–Ω –Ω–∞ —Å–µ–∑–æ–Ω—ã

–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
‚Ä¢ –í—Å–µ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π: 200
‚Ä¢ –ë–µ–∑ —Ü–µ–Ω: 15
...

üìã –î–µ—Ç–∞–ª–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –±–µ–∑ —Ü–µ–Ω:
1. ABC123 (Toyota Camry)
   –§–∏–ª–∏–∞–ª: tbilisi
   –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç: 3 —Ü–µ–Ω
...
```

---

### 5. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–°–æ–∑–¥–∞–Ω–æ 4 –¥–æ–∫—É–º–µ–Ω—Ç–∞:**

#### `docs/CAR_PRICE_CHECKS.md` (596 —Å—Ç—Ä–æ–∫)
–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã:
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (—Å–∫—Ä–∏–ø—Ç, API, n8n)
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Ç–∞–±–ª–∏—Ü—ã, views, —Ñ—É–Ω–∫—Ü–∏–∏)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- RentProg API –æ–ø–∏—Å–∞–Ω–∏–µ
- –ü—Ä–∏–º–µ—Ä—ã SQL –∑–∞–ø—Ä–æ—Å–æ–≤
- Troubleshooting

#### `CAR_PRICE_CHECKS_QUICK_START.md` (214 —Å—Ç—Ä–æ–∫)
–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:
- –†–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (3 —Å–ø–æ—Å–æ–±–∞)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ (3 —à–∞–≥–∞)
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- API endpoints

#### `CAR_PRICE_CHECKS_COMPLETE.md` (612 —Å—Ç—Ä–æ–∫)
–ò—Ç–æ–≥–æ–≤–æ–µ —Ä–µ–∑—é–º–µ:
- –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
- –î–µ–ø–ª–æ–π (4 —à–∞–≥–∞)
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞
- –ö–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è

#### `CAR_PRICE_CHECKS_DEPLOY_STEPS.md` (–Ω–æ–≤—ã–π)
–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–µ–ø–ª–æ—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
- –ö–æ–º–º–∏—Ç –∏ –ø—É—à
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏
- –¢–µ—Å—Ç —Å–∫—Ä–∏–ø—Ç–∞
- –ò–º–ø–æ—Ä—Ç n8n workflow
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- Troubleshooting

---

### 6. –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

**`setup/check_migration_013.mjs`**
–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏:
```bash
node setup/check_migration_013.mjs
```

**`setup/test_check_single_branch.mjs`**
–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–¥–Ω–æ–≥–æ —Ñ–∏–ª–∏–∞–ª–∞:
```bash
node setup/test_check_single_branch.mjs
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –ö–æ–¥

- **–°–∫—Ä–∏–ø—Ç—ã:** 437 —Å—Ç—Ä–æ–∫ (check_cars_without_prices.mjs)
- **API:** ~80 —Å—Ç—Ä–æ–∫ (–∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ src/api/index.ts)
- **SQL:** 170 —Å—Ç—Ä–æ–∫ (–º–∏–≥—Ä–∞—Ü–∏—è 013)
- **n8n JSON:** 180 —Å—Ç—Ä–æ–∫ (workflow)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** 1,600+ —Å—Ç—Ä–æ–∫ (4 —Ñ–∞–π–ª–∞)
- **–í–°–ï–ì–û:** ~2,500 —Å—Ç—Ä–æ–∫ –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- ‚úÖ 1 –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç (`.mjs`)
- ‚úÖ 2 –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–∞ (`.mjs`)
- ‚úÖ 1 SQL –º–∏–≥—Ä–∞—Ü–∏—è
- ‚úÖ 1 n8n workflow (`.json`)
- ‚úÖ 4 –¥–æ–∫—É–º–µ–Ω—Ç–∞ (`.md`)
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `src/api/index.ts`

**–ò—Ç–æ–≥–æ:** 10 —Ñ–∞–π–ª–æ–≤

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### RentProg API

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ endpoints:**

1. **`/get_token?company_token=X`** (GET)
   - –ü–æ–ª—É—á–µ–Ω–∏–µ request token
   - TTL ~240 —Å–µ–∫—É–Ω–¥
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

2. **`/all_cars`** (GET —Å Bearer token)
   - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–≤—Ç–æ —Ñ–∏–ª–∏–∞–ª–∞
   - –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

3. **`/car_data_with_bookings?car_id=X`** (GET —Å Bearer token)
   - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–≤—Ç–æ
   - –°–µ–∑–æ–Ω—ã —Å –¥–∞—Ç–∞–º–∏
   - –¶–µ–Ω—ã –ø–æ –∫–∞–∂–¥–æ–º—É —Å–µ–∑–æ–Ω—É
   - –ê–∫—Ç–∏–≤–Ω—ã–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è "–±–µ–∑ —Ü–µ–Ω"

–ê–≤—Ç–æ–º–æ–±–∏–ª—å —Å—á–∏—Ç–∞–µ—Ç—Å—è –ë–ï–ó –¶–ï–ù –µ—Å–ª–∏:
- –ù–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ price record
- –í—Å–µ price records —Å –Ω—É–ª–µ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏  
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ–∑–æ–Ω–æ–≤ > –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ valid prices

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

**–î–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è:**
1. Company Token (branch key) ‚Üí Request Token
2. Request Token ‚Üí API –∑–∞–ø—Ä–æ—Å—ã

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤:**
- `process.env.RENTPROG_BRANCH_KEYS` (JSON)
- `process.env.RENTPROG_TOKEN_*` (–æ—Ç–¥–µ–ª—å–Ω—ã–µ)

### –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

**–í –ë–î —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:**
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–∞–∂–¥–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
- –ü–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ API (JSONB)
- –î–µ—Ç–∞–ª–∏ –ø–æ –∫–∞–∂–¥–æ–º—É —Å–µ–∑–æ–Ω—É
- –°—Ç–∞—Ç—É—Å —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã
- Timestamps

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –õ–æ–∫–∞–ª—å–Ω–æ (–∑–∞–≤–µ—Ä—à–µ–Ω–æ)

- ‚úÖ TypeScript –∫–æ–¥ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è (–æ—à–∏–±–∫–∏ —Ç–æ–ª—å–∫–æ –≤ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–∞—Ö)
- ‚úÖ SQL –º–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `car_price_checks` —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ View `unresolved_price_issues` —Å–æ–∑–¥–∞–Ω
- ‚úÖ –§—É–Ω–∫—Ü–∏–∏ SQL —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ 8 –∏–Ω–¥–µ–∫—Å–æ–≤ —Å–æ–∑–¥–∞–Ω—ã

### –¢—Ä–µ–±—É–µ—Ç –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

- ‚è≥ Git pull –∏ npm build
- ‚è≥ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ API (docker restart)
- ‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞)
- ‚è≥ –¢–µ—Å—Ç —Å–∫—Ä–∏–ø—Ç–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏
- ‚è≥ –¢–µ—Å—Ç API endpoint
- ‚è≥ –ò–º–ø–æ—Ä—Ç n8n workflow
- ‚è≥ –ê–∫—Ç–∏–≤–∞—Ü–∏—è workflow

---

## üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –¥–µ–ø–ª–æ—è

–°–º. **`CAR_PRICE_CHECKS_DEPLOY_STEPS.md`**

**–ö—Ä–∞—Ç–∫–æ:**
1. –ö–æ–º–º–∏—Ç ‚Üí Push ‚Üí Git pull –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. npm build ‚Üí docker restart jarvis-api
3. node setup/check_migration_013.mjs (–ø—Ä–æ–≤–µ—Ä–∫–∞)
4. node setup/test_check_single_branch.mjs (—Ç–µ—Å—Ç)
5. curl API endpoint (–ø—Ä–æ–≤–µ—Ä–∫–∞)
6. –ò–º–ø–æ—Ä—Ç n8n workflow —á–µ—Ä–µ–∑ UI
7. –ê–∫—Ç–∏–≤–∞—Ü–∏—è workflow

**–í—Ä–µ–º—è –¥–µ–ø–ª–æ—è:** ~10-15 –º–∏–Ω—É—Ç

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π** (–≤—ã–ø–æ–ª–Ω–∏—Ç–µ)
2. **–î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä** (—Å–ª–µ–¥—É–π—Ç–µ CAR_PRICE_CHECKS_DEPLOY_STEPS.md)
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
4. **–û–∂–∏–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞** (4:00 UTC)
5. **–ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**
6. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç:

- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å** –≤—Å–µ –∞–≤—Ç–æ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
- ‚úÖ **–û—Ç–ø—Ä–∞–≤–ª—è—Ç—å Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω—è—Ç—å –∏—Å—Ç–æ—Ä–∏—é** –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤ –ë–î
- ‚úÖ **–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å API** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- ‚úÖ **–ü–æ–∑–≤–æ–ª—è—Ç—å SQL-–∞–Ω–∞–ª–∏–∑** —á–µ—Ä–µ–∑ views –∏ —Ñ—É–Ω–∫—Ü–∏–∏

**–ü–æ–∫—Ä—ã—Ç–∏–µ:** 4 —Ñ–∏–ª–∏–∞–ª–∞, ~200 –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π  
**–ß–∞—Å—Ç–æ—Ç–∞:** –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 4:00 UTC  
**–í—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏:** 2-5 –º–∏–Ω—É—Ç

---

## üéâ –ò—Ç–æ–≥

‚úÖ **–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

- –í–µ—Å—å –∫–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –ª–æ–∫–∞–ª—å–Ω–æ
- SQL –º–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è –∏ –¥–µ—Ç–∞–ª—å–Ω–∞—è
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é –ø–æ—à–∞–≥–æ–≤—ã–µ
- –°–∏—Å—Ç–µ–º–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–∞—è

**–û—Å—Ç–∞–ª–æ—Å—å:** –í—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Å–æ–≥–ª–∞—Å–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.

---

**–ê–≤—Ç–æ—Ä:** Jarvis AI Agent  
**–î–∞—Ç–∞:** 2025-11-09  
**–í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** ~3 —á–∞—Å–∞  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ COMPLETE

