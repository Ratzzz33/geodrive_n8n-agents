# ‚úÖ –ü–∞—Ä—Å–µ—Ä –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –û–ë–ù–û–í–õ–ï–ù

**–î–∞—Ç–∞:** 2025-11-14  
**Workflow:** https://n8n.rentflow.rentals/workflow/u3cOUuoaH5RSw7hm

---

## üéØ –ß–¢–û –ò–ó–ú–ï–ù–ò–õ–û–°–¨

### –î–û –û–ë–ù–û–í–õ–ï–ù–ò–Ø:
- –ü–∞—Ä—Å–∏–ª–∏: **9 –ø–æ–ª–µ–π**
- –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ: –≤ JSONB `data`

### –ü–û–°–õ–ï –û–ë–ù–û–í–õ–ï–ù–ò–Ø:
- –ü–∞—Ä—Å–∏–º: **46 –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–æ–ª–µ–π** + `data` (JSONB)
- –í—Å–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–æ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤!

---

## üìã –°–ü–ò–°–û–ö –ü–ê–†–°–ò–ú–´–• –ü–û–õ–ï–ô (46 –ø–æ–ª–µ–π)

### 1. **–û—Å–Ω–æ–≤–Ω—ã–µ (5 –ø–æ–ª–µ–π):**
1. `branch` - —Ñ–∏–ª–∏–∞–ª
2. `rentprog_id` - ID –≤ RentProg
3. `car_name` - –Ω–∞–∑–≤–∞–Ω–∏–µ
4. `code` - –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–æ–¥
5. `number` - –≥–æ—Å.–Ω–æ–º–µ—Ä

### 2. **–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (7 –ø–æ–ª–µ–π):**
6. `vin` - VIN –Ω–æ–º–µ—Ä ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
7. `color` - —Ü–≤–µ—Ç
8. `year` - –≥–æ–¥ –≤—ã–ø—É—Å–∫–∞
9. `transmission` - –∫–æ—Ä–æ–±–∫–∞ –ø–µ—Ä–µ–¥–∞—á (–ê–≤—Ç–æ–º–∞—Ç/–ú–µ—Ö–∞–Ω–∏–∫–∞) ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
10. `fuel` - —Ç–∏–ø —Ç–æ–ø–ª–∏–≤–∞
11. `car_type` - —Ç–∏–ø –∫—É–∑–æ–≤–∞ (–°–µ–¥–∞–Ω/–ö—Ä–æ—Å—Å–æ–≤–µ—Ä) ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
12. `car_class` - –∫–ª–∞—Å—Å (–≠–∫–æ–Ω–æ–º/–°—Ä–µ–¥–Ω–∏–π/–ü—Ä–µ–º–∏—É–º) ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

### 3. **–°–æ—Å—Ç–æ—è–Ω–∏—è (4 –ø–æ–ª—è):**
13. `active` - –∞–∫—Ç–∏–≤–µ–Ω –ª–∏ ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
14. `state` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ (1=–¥–æ—Å—Ç—É–ø–µ–Ω, 2=–≤–Ω–∏–º–∞–Ω–∏–µ, 3=–Ω–µ–ª—å–∑—è) ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
15. `tank_state` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∫–∞ (–ø–æ–ª–Ω—ã–π/–ø—É—Å—Ç–æ–π) ‚≠ê‚≠ê‚≠ê‚≠ê
16. `clean_state` - —á–∏—Å—Ç–æ—Ç–∞ (—á–∏—Å—Ç—ã–π/–≥—Ä—è–∑–Ω—ã–π) ‚≠ê‚≠ê‚≠ê‚≠ê

### 4. **–ü—Ä–æ–±–µ–≥ –∏ –¢–û (4 –ø–æ–ª—è):**
17. `mileage` - —Ç–µ–∫—É—â–∏–π –ø—Ä–æ–±–µ–≥ ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
18. `tire_type` - —Ç–∏–ø —Ä–µ–∑–∏–Ω—ã (1=–ª–µ—Ç–æ, 2=–∑–∏–º–∞, 3=–≤—Å–µ—Å–µ–∑–æ–Ω) ‚≠ê‚≠ê‚≠ê‚≠ê
19. `tire_size` - —Ä–∞–∑–º–µ—Ä —à–∏–Ω
20. `last_inspection` - –¥–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –¢–û

### 5. **–¶–µ–Ω—ã –∏ —Ñ–∏–Ω–∞–Ω—Å—ã (7 –ø–æ–ª–µ–π):**
21. `deposit` - –∑–∞–ª–æ–≥
22. `price_hour` - —Ü–µ–Ω–∞ –∑–∞ —á–∞—Å ‚≠ê‚≠ê‚≠ê‚≠ê
23. `hourly_deposit` - –∑–∞–ª–æ–≥ –¥–ª—è –ø–æ—á–∞—Å–æ–≤–æ–π –∞—Ä–µ–Ω–¥—ã
24. `monthly_deposit` - –∑–∞–ª–æ–≥ –¥–ª—è –º–µ—Å—è—á–Ω–æ–π –∞—Ä–µ–Ω–¥—ã
25. `investor_id` - ID –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞ ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
26. `purchase_price` - —Ü–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏
27. `purchase_date` - –¥–∞—Ç–∞ –ø–æ–∫—É–ø–∫–∏

### 6. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (5 –ø–æ–ª–µ–π):**
28. `age_limit` - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç –≤–æ–¥–∏—Ç–µ–ª—è ‚≠ê‚≠ê‚≠ê‚≠ê
29. `driver_year_limit` - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å—Ç–∞–∂ ‚≠ê‚≠ê‚≠ê‚≠ê
30. `franchise` - —Ä–∞–∑–º–µ—Ä —Ñ—Ä–∞–Ω—à–∏–∑—ã ‚≠ê‚≠ê‚≠ê‚≠ê
31. `max_fine` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —à—Ç—Ä–∞—Ñ
32. `repair_cost` - —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ä–µ–º–æ–Ω—Ç–∞ —ç–ª–µ–º–µ–Ω—Ç–∞

### 7. **–û–ø—Ü–∏–∏ –∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ (8 –ø–æ–ª–µ–π):**
33. `is_air` - –∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä
34. `climate_control` - –∫–ª–∏–º–∞—Ç-–∫–æ–Ω—Ç—Ä–æ–ª—å
35. `parktronic` - –ø–∞—Ä–∫—Ç—Ä–æ–Ω–∏–∫
36. `parktronic_camera` - –∫–∞–º–µ—Ä–∞ –∑–∞–¥–Ω–µ–≥–æ –≤–∏–¥–∞ ‚≠ê‚≠ê‚≠ê‚≠ê
37. `heated_seats` - –ø–æ–¥–æ–≥—Ä–µ–≤ —Å–∏–¥–µ–Ω–∏–π
38. `audio_system` - –∞—É–¥–∏–æ—Å–∏—Å—Ç–µ–º–∞
39. `usb_system` - USB
40. `rain_sensor` - –¥–∞—Ç—á–∏–∫ –¥–æ–∂–¥—è

### 8. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ (3 –ø–æ–ª—è):**
41. `engine_capacity` - –æ–±—ä–µ–º –¥–≤–∏–≥–∞—Ç–µ–ª—è
42. `number_doors` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–≤–µ—Ä–µ–π
43. `tank_value` - –æ–±—ä–µ–º –±–∞–∫–∞

### 9. **–î–æ–∫—É–º–µ–Ω—Ç—ã (3 –ø–æ–ª—è):**
44. `pts` - –ü–¢–°
45. `registration_certificate` - —Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–æ –æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
46. `body_number` - –Ω–æ–º–µ—Ä –∫—É–∑–æ–≤–∞

### 10. **–ü–æ–ª–Ω—ã–π JSON:**
47. `data` - JSONB —Å–æ –í–°–ï–ú–ò –ø–æ–ª—è–º–∏ –∏–∑ API (~100 –ø–æ–ª–µ–π)

---

## üé® –í–ò–ó–£–ê–õ–¨–ù–´–ï –≠–õ–ï–ú–ï–ù–¢–´

### –ß—Ç–æ —Ç–µ–ø–µ—Ä—å –ø–∞—Ä—Å–∏–º –∏–∑ UI:

#### üü¢ –ó–µ–ª–µ–Ω—ã–π –ø–∞–ª–µ—Ü –≤–≤–µ—Ä—Ö (–∫–æ–ª–æ–Ω–∫–∞ "–°–æ—Å—Ç–æ—è–Ω–∏–µ")
- **–ü–∞—Ä—Å–∏–º:** `active: true`, `state: 1`
- **–ó–Ω–∞—á–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–æ–±–∏–ª—å –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –∞—Ä–µ–Ω–¥—ã
- **–¶–≤–µ—Ç:** `rgb(76, 175, 80)` (–∑–µ–ª–µ–Ω—ã–π)

#### ‚ùÑÔ∏è –°–Ω–µ–∂–∏–Ω–∫–∞ (–∫–æ–ª–æ–Ω–∫–∞ "–†–µ–∑–∏–Ω–∞")
- **–ü–∞—Ä—Å–∏–º:** `tire_type: 2`
- **–ó–Ω–∞—á–µ–Ω–∏–µ:** –ó–∏–º–Ω—è—è —Ä–µ–∑–∏–Ω–∞
- **–¶–≤–µ—Ç:** `rgb(33, 150, 243)` (—Å–∏–Ω–∏–π)

#### ‚òÄÔ∏è –°–æ–ª–Ω—Ü–µ (–∫–æ–ª–æ–Ω–∫–∞ "–†–µ–∑–∏–Ω–∞")
- **–ü–∞—Ä—Å–∏–º:** `tire_type: 1`
- **–ó–Ω–∞—á–µ–Ω–∏–µ:** –õ–µ—Ç–Ω—è—è —Ä–µ–∑–∏–Ω–∞
- **–¶–≤–µ—Ç:** `rgb(255, 235, 59)` (–∂–µ–ª—Ç—ã–π)

#### üîÑ –õ—É–Ω–∞-—Å–æ–ª–Ω—Ü–µ (–∫–æ–ª–æ–Ω–∫–∞ "–†–µ–∑–∏–Ω–∞")
- **–ü–∞—Ä—Å–∏–º:** `tire_type: 3`
- **–ó–Ω–∞—á–µ–Ω–∏–µ:** –í—Å–µ—Å–µ–∑–æ–Ω–Ω–∞—è —Ä–µ–∑–∏–Ω–∞
- **–¶–≤–µ—Ç:** `rgb(33, 150, 243)` (—Å–∏–Ω–∏–π)

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –û–±—Ä–∞–±–æ—Ç–∫–∞ JSON:API —Ñ–æ—Ä–º–∞—Ç–∞:
```javascript
// –ü–æ–¥–¥–µ—Ä–∂–∫–∞ JSON:API —Å attributes
const attrs = car.attributes || car;
```

### –ó–∞—â–∏—Ç–∞ –æ—Ç NULL:
```sql
DO UPDATE SET
  car_name = COALESCE(EXCLUDED.car_name, cars.car_name),
  vin = COALESCE(EXCLUDED.vin, cars.vin),
  mileage = COALESCE(EXCLUDED.mileage, cars.mileage),
  ...
```

**–ï—Å–ª–∏ –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ NULL, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å—Ç–∞—Ä–æ–µ!**

---

## üìä –ü–û–ö–†–´–¢–ò–ï –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–ò

| –ê–≥–µ–Ω—Ç | –ù—É–∂–Ω—ã–µ –ø–æ–ª—è | –¢–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω—ã? |
|-------|-------------|------------------|
| –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä –±—Ä–æ–Ω–µ–π | `active`, `state` | ‚úÖ –î–ê |
| –ö–æ–Ω—Ç—Ä–æ–ª—å –¢–û | `mileage`, `tire_type`, `last_inspection` | ‚úÖ –î–ê |
| –ö–æ–Ω—Ç—Ä–æ–ª—å —Ä–µ–º–æ–Ω—Ç–æ–≤ | `state` | ‚úÖ –î–ê |
| –û—Ç–¥–µ–ª –ø—Ä–æ–¥–∞–∂ | `transmission`, `car_class`, `car_type` | ‚úÖ –î–ê |
| –§–∏–Ω–∞–Ω—Å—ã | `investor_id`, `purchase_price` | ‚úÖ –î–ê |
| –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ | `age_limit`, `driver_year_limit` | ‚úÖ –î–ê |

**–ü–æ–∫—Ä—ã—Ç–∏–µ:** ~85% –∫—Ä–∏—Ç–∏—á–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

---

## ‚ö†Ô∏è –ß–¢–û –ï–©–ï –ù–ï –ü–ê–†–°–ò–ú

### –¶–µ–Ω—ã –ø–æ –¥–Ω—è–º (–∫–æ–ª–æ–Ω–∫–∏ 8-13 –≤ —Ç–∞–±–ª–∏—Ü–µ):
- 1-2 –¥–Ω—è: 107 –ª–∞—Ä–∏
- 3-4 –¥–Ω—è: 102 –ª–∞—Ä–∏
- 5-7 –¥–Ω–µ–π: 96 –ª–∞—Ä–∏
- 8-15 –¥–Ω–µ–π: 91 –ª–∞—Ä–∏
- 16-30 –¥–Ω–µ–π: 77 –ª–∞—Ä–∏
- 30+ –¥–Ω–µ–π: 63 –ª–∞—Ä–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ `relationships.prices.data` —Å ID, –Ω–µ —Å–∞–º–∏ —Ü–µ–Ω—ã!

**–†–µ—à–µ–Ω–∏–µ:** –ù—É–∂–Ω–æ –ª–∏–±–æ:
1. –ù–∞–π—Ç–∏ –¥—Ä—É–≥–æ–π endpoint
2. –ü–∞—Ä—Å–∏—Ç—å `included` —Å–µ–∫—Ü–∏—é –∏–∑ JSON:API
3. –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π workflow –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ü–µ–Ω

---

## ‚úÖ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### 1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å workflow:
```
https://n8n.rentflow.rentals/workflow/u3cOUuoaH5RSw7hm
```

–ù–∞–∂–∞—Ç—å "Test workflow" ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ –ø–æ–ª—è –ø–∞—Ä—Å—è—Ç—Å—è

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ë–î:
```sql
SELECT 
  rentprog_id, car_name, active, state, 
  mileage, transmission, tire_type, 
  investor_id, age_limit
FROM cars 
WHERE rentprog_id = '47192';
```

### 3. –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ:
- –ò–Ω—Ç–µ—Ä–≤–∞–ª: **—Ä–∞–∑ –≤ —á–∞—Å**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

---

## üéØ –ò–¢–û–ì–ò

### ‚úÖ –ß—Ç–æ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç:
- **46 —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª–µ–π**
- **–í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è** (active, state, tank_state, clean_state)
- **–í—Å–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã** (—Ä–µ–∑–∏–Ω–∞, —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
- **–í—Å–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è** –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- **–í—Å–µ –æ–ø—Ü–∏–∏** –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
- **–ü—Ä–æ–±–µ–≥ –∏ –¢–û** –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤
- **–§–∏–Ω–∞–Ω—Å—ã** (–∏–Ω–≤–µ—Å—Ç–æ—Ä, —Ü–µ–Ω—ã)

### üìà –£–ª—É—á—à–µ–Ω–∏—è:
- –ë—ã–ª–æ: **9 –ø–æ–ª–µ–π** (~20% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- –°—Ç–∞–ª–æ: **46 –ø–æ–ª–µ–π** (~85% –ø–æ–∫—Ä—ã—Ç–∏–µ)
- **+400% —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–∞—Ä—Å–∏–Ω–≥–∞!**

### üé® –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:
- ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏–µ (–∑–µ–ª–µ–Ω—ã–π/–∂–µ–ª—Ç—ã–π/–∫—Ä–∞—Å–Ω—ã–π)
- ‚úÖ –¢–∏–ø —Ä–µ–∑–∏–Ω—ã (‚ùÑÔ∏è/‚òÄÔ∏è/üîÑ)
- ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∫–∞
- ‚úÖ –ß–∏—Å—Ç–æ—Ç–∞

---

**Workflow –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ! –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ!** üöÄ

