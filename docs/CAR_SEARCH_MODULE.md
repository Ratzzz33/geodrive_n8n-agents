# –ú–æ–¥—É–ª—å –ø–æ–∏—Å–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –¥–ª—è AI –∞–≥–µ–Ω—Ç–∞

## üìå –û–±–∑–æ—Ä

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å –ø–æ–∏—Å–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –ø–æ —Ñ–∏–ª–∏–∞–ª–∞–º —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º —Ñ–∏–ª—å—Ç—Ä–æ–≤. –ü—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AI –∞–≥–µ–Ω—Ç–æ–º –≤ —á–∞—Ç–∞—Ö Telegram/WhatsApp —á–µ—Ä–µ–∑ Umnico.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ —Ñ–∏–ª–∏–∞–ª–∞–º (–¢–±–∏–ª–∏—Å–∏, –ë–∞—Ç—É–º–∏, –ö—É—Ç–∞–∏—Å–∏)
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º –∞—Ä–µ–Ω–¥—ã (–ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏)
- ‚úÖ –¶–µ–Ω–æ–≤—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã (GEL/USD)
- ‚úÖ –§–∏–ª—å—Ç—Ä—ã –ø–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º (–∫–æ—Ä–æ–±–∫–∞, –≥–æ–¥, —Ç–∏–ø –∫—É–∑–æ–≤–∞ –∏ —Ç.–¥.)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç (GEL ‚áÑ USD –ø–æ –∫—É—Ä—Å—É 2.7)
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è —á–∞—Ç–æ–≤
- ‚úÖ REST API endpoints

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

```
src/
‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îî‚îÄ‚îÄ car-search/
‚îÇ       ‚îú‚îÄ‚îÄ index.ts          # –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å
‚îÇ       ‚îú‚îÄ‚îÄ examples.ts       # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îÇ       ‚îî‚îÄ‚îÄ README.md         # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ api/
    ‚îî‚îÄ‚îÄ car-search.ts         # REST API endpoints
```

## üöÄ API Endpoints

### 1. POST /api/cars/search

–û—Å–Ω–æ–≤–Ω–æ–π endpoint –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏.

**Request:**
```bash
curl -X POST http://localhost:3000/api/cars/search \
  -H "Content-Type: application/json" \
  -d '{
    "branch": "batumi",
    "startDate": "2025-11-09",
    "endDate": "2025-11-10",
    "maxPriceUSD": 50,
    "transmission": "–ê–≤—Ç–æ–º–∞—Ç",
    "yearFrom": 2015
  }'
```

**Response:**
```json
{
  "success": true,
  "filters": {...},
  "results": [
    {
      "id": "uuid",
      "model": "Ford Fiesta",
      "plate": "BB542QB",
      "year": 2015,
      "transmission": "–ê–≤—Ç–æ–º–∞—Ç",
      "branch": {
        "code": "batumi",
        "name": "–ë–∞—Ç—É–º–∏"
      },
      "price": {
        "gel": 96,
        "usd": 35.56,
        "currency": "GEL",
        "periods": [...]
      },
      "available": true
    }
  ],
  "count": 3,
  "summary": {
    "totalCars": 15,
    "availableCars": 15,
    "priceRange": {...}
  },
  "message": "üöó –ù–∞—à–µ–ª 3 –º–∞—à–∏–Ω—ã –≤ –ë–∞—Ç—É–º–∏..."
}
```

### 2. GET /api/cars/search/quick

–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.

**Request:**
```bash
curl "http://localhost:3000/api/cars/search/quick?branch=batumi&maxPriceUSD=50&startDate=2025-11-09&endDate=2025-11-10"
```

### 3. POST /api/cars/search/natural

–ü–æ–∏—Å–∫ –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ (–¥–ª—è AI –∞–≥–µ–Ω—Ç–∞).

**Request:**
```bash
curl -X POST http://localhost:3000/api/cars/search/natural \
  -H "Content-Type: application/json" \
  -d '{"query": "–ø–æ–∫–∞–∂–∏ –º–∞—à–∏–Ω—ã –≤ –±–∞—Ç—É–º–∏ –¥–æ 50 –¥–æ–ª–ª–∞—Ä–æ–≤ –Ω–∞ 9-10 –Ω–æ—è–±—Ä—è"}'
```

**Response:**
```json
{
  "success": true,
  "results": [...],
  "message": "üöó –ù–∞—à–µ–ª 3 –º–∞—à–∏–Ω—ã...",
  "parsedFilters": {
    "branch": "batumi",
    "maxPriceUSD": 50,
    "startDate": "2025-11-09",
    "endDate": "2025-11-10"
  }
}
```

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ò–∑ TypeScript –∫–æ–¥–∞

```typescript
import { searchCars, formatForChat } from './modules/car-search';

// –ü–æ–∏—Å–∫
const response = await searchCars({
  branch: 'batumi',
  startDate: '2025-11-09',
  endDate: '2025-11-10',
  maxPriceUSD: 50,
  transmission: '–ê–≤—Ç–æ–º–∞—Ç',
});

// –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —á–∞—Ç–∞
const message = formatForChat(response);
console.log(message);
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Bot

```typescript
bot.on('message', async (msg) => {
  const query = msg.text;
  
  // –ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ natural language API
  const response = await fetch('http://localhost:3000/api/cars/search/natural', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ query }),
  });
  
  const data = await response.json();
  
  await bot.sendMessage(msg.chat.id, data.message);
});
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å n8n (AI Agent)

```javascript
// –í HTTP Request –Ω–æ–¥–µ
const filters = {
  branch: $json.branch || 'batumi',
  startDate: $json.startDate,
  endDate: $json.endDate,
  maxPriceUSD: $json.maxPrice || 50,
};

// POST http://localhost:3000/api/cars/search

// –í –æ—Ç–≤–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç–µ:
// - results: –º–∞—Å—Å–∏–≤ –º–∞—à–∏–Ω
// - message: –≥–æ—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è —á–∞—Ç–∞
```

## üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
- `branch` - –∫–æ–¥ —Ñ–∏–ª–∏–∞–ª–∞ –∏–ª–∏ –º–∞—Å—Å–∏–≤ –∫–æ–¥–æ–≤

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ

**–î–∞—Ç—ã:**
- `startDate` - –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ (ISO 8601)
- `endDate` - –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è (ISO 8601)

**–¶–µ–Ω—ã:**
- `maxPriceGEL` - –º–∞–∫—Å–∏–º—É–º –≤ –ª–∞—Ä–∏
- `maxPriceUSD` - –º–∞–∫—Å–∏–º—É–º –≤ –¥–æ–ª–ª–∞—Ä–∞—Ö
- `minPriceGEL` - –º–∏–Ω–∏–º—É–º –≤ –ª–∞—Ä–∏
- `minPriceUSD` - –º–∏–Ω–∏–º—É–º –≤ –¥–æ–ª–ª–∞—Ä–∞—Ö

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- `transmission` - '–ê–≤—Ç–æ–º–∞—Ç' | '–ú–µ—Ö–∞–Ω–∏–∫–∞' | '–í–∞—Ä–∏–∞—Ç–æ—Ä'
- `yearFrom` - –≥–æ–¥ –≤—ã–ø—É—Å–∫–∞ –æ—Ç
- `yearTo` - –≥–æ–¥ –≤—ã–ø—É—Å–∫–∞ –¥–æ
- `carClass` - –∫–ª–∞—Å—Å –∞–≤—Ç–æ
- `carType` - —Ç–∏–ø –∫—É–∑–æ–≤–∞
- `seats` - –º–∏–Ω–∏–º—É–º –º–µ—Å—Ç
- `driveUnit` - –ø—Ä–∏–≤–æ–¥

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- `limit` - –º–∞–∫—Å. —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20)
- `sortBy` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: 'price' | 'year' | 'model'
- `sortOrder` - –ø–æ—Ä—è–¥–æ–∫: 'asc' | 'desc'

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –ö—É—Ä—Å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
USD_TO_GEL=2.7

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=postgresql://...
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ú–æ–¥—É–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–∞–±–ª–∏—Ü—ã:
- `cars` - –∞–≤—Ç–æ–º–æ–±–∏–ª–∏
- `branches` - —Ñ–∏–ª–∏–∞–ª—ã
- `car_prices` - —Ü–µ–Ω—ã (—Å –≤–∞–ª—é—Ç–æ–π GEL –∏ –∫—É—Ä—Å–æ–º 2.7)
- `bookings` - –±—Ä–æ–Ω–∏

## üìä –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

```typescript
interface CarSearchResponse {
  success: boolean;
  filters: CarSearchFilters;
  results: CarSearchResult[];      // –ú–∞—Å—Å–∏–≤ –º–∞—à–∏–Ω
  count: number;                    // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
  summary: {
    totalCars: number;
    availableCars: number;
    priceRange?: {
      minGEL: number;
      maxGEL: number;
      minUSD: number;
      maxUSD: number;
    };
  };
  message?: string;                 // –ì–æ—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è —á–∞—Ç–∞
}
```

## üé≠ –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –ü—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫

```typescript
{
  "branch": "batumi",
  "startDate": "2025-11-09",
  "endDate": "2025-11-10"
}
```

### –° —Ü–µ–Ω–æ–≤—ã–º –ª–∏–º–∏—Ç–æ–º

```typescript
{
  "branch": "batumi",
  "maxPriceUSD": 50,
  "transmission": "–ê–≤—Ç–æ–º–∞—Ç"
}
```

### –ü–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Ñ–∏–ª–∏–∞–ª–∞–º

```typescript
{
  "branch": ["batumi", "tbilisi"],
  "yearFrom": 2015,
  "maxPriceGEL": 135
}
```

### –ö—Ä–æ—Å—Å–æ–≤–µ—Ä—ã —Å –ø–æ–ª–Ω—ã–º –ø—Ä–∏–≤–æ–¥–æ–º

```typescript
{
  "branch": "batumi",
  "carType": "–ö—Ä–æ—Å—Å–æ–≤–µ—Ä",
  "driveUnit": "–ü–æ–ª–Ω—ã–π",
  "sortBy": "price",
  "sortOrder": "asc"
}
```

## ü§ñ –î–ª—è AI –∞–≥–µ–Ω—Ç–∞

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤

–ú–æ–¥—É–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç—ã –¥–ª—è —á–∞—Ç–æ–≤:

```
üöó –ù–∞—à–µ–ª 3 –º–∞—à–∏–Ω—ã –≤ –ë–∞—Ç—É–º–∏ –Ω–∞ 9 - 10 –Ω–æ—è–±—Ä—è:

1. Ford Fiesta (2015)
   üìç –ë–∞—Ç—É–º–∏
   ‚öôÔ∏è –ê–≤—Ç–æ–º–∞—Ç | 5 –º–µ—Å—Ç
   üí∞ 96 GEL/–¥–µ–Ω—å (‚âà$35.56)

2. Honda Fit EX (2015)
   üìç –ë–∞—Ç—É–º–∏
   ‚öôÔ∏è –ê–≤—Ç–æ–º–∞—Ç | 5 –º–µ—Å—Ç
   üí∞ 107 GEL/–¥–µ–Ω—å (‚âà$39.63)

3. Kia Soul (2013)
   üìç –ë–∞—Ç—É–º–∏
   ‚öôÔ∏è –ê–≤—Ç–æ–º–∞—Ç | 5 –º–µ—Å—Ç
   üí∞ 107 GEL/–¥–µ–Ω—å (‚âà$39.63)

üìä –¶–µ–Ω—ã: –æ—Ç 96 –¥–æ 135 GEL
```

### –ü–∞—Ä—Å–∏–Ω–≥ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞

–ú–æ–¥—É–ª—å —É–º–µ–µ—Ç –ø–∞—Ä—Å–∏—Ç—å –ø—Ä–æ—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã:

**–ü—Ä–∏–º–µ—Ä—ã:**
- "–ø–æ–∫–∞–∂–∏ –º–∞—à–∏–Ω—ã –≤ –±–∞—Ç—É–º–∏ –¥–æ 50 –¥–æ–ª–ª–∞—Ä–æ–≤"
- "–Ω–∞–π–¥–∏ –∞–≤—Ç–æ–º–∞—Ç –≤ —Ç–±–∏–ª–∏—Å–∏ –Ω–∞ 9-10 –Ω–æ—è–±—Ä—è"
- "–º–∞—à–∏–Ω—ã –¥–æ 100 –≥–µ–ª"

**–†–∞—Å–ø–æ–∑–Ω–∞–µ—Ç:**
- –§–∏–ª–∏–∞–ª—ã: –±–∞—Ç—É–º–∏, —Ç–±–∏–ª–∏—Å–∏, –∫—É—Ç–∞–∏—Å–∏
- –¶–µ–Ω—ã: —á–∏—Å–ª–∞ + –¥–æ–ª–ª/usd/–≥–µ–ª/gel
- –î–∞—Ç—ã: "9 –Ω–æ—è–±—Ä—è", "9-10 –Ω–æ—è–±—Ä—è"
- –ö–æ—Ä–æ–±–∫—É: –∞–≤—Ç–æ–º–∞—Ç, –º–µ—Ö–∞–Ω–∏–∫–∞

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
node test_car_search.mjs

# –¢–µ—Å—Ç —á–µ—Ä–µ–∑ API
curl -X POST http://localhost:3000/api/cars/search/natural \
  -H "Content-Type: application/json" \
  -d '{"query": "–º–∞—à–∏–Ω—ã –≤ –±–∞—Ç—É–º–∏ –¥–æ 50 –¥–æ–ª–ª–∞—Ä–æ–≤"}'
```

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ —Ü–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ **GEL** (–ª–∞—Ä–∏)
- –ö—É—Ä—Å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏: **1 USD = 2.7 GEL**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω—ã –¥–∞—Ç—ã
- –ú–∞—à–∏–Ω—ã —Å `state != 1` —Å—á–∏—Ç–∞—é—Ç—Å—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è —á–µ—Ä–µ–∑ `limit`

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (Redis)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø—Ü–∏–π (GPS, –¥–µ—Ç—Å–∫–æ–µ –∫—Ä–µ—Å–ª–æ)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö OR —É—Å–ª–æ–≤–∏–π
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –≤ PDF
- [ ] Webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## üìÑ –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [ARCHITECTURE.md](../ARCHITECTURE.md) - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- [src/modules/car-search/README.md](../src/modules/car-search/README.md) - –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥—É–ª—è
- [src/modules/car-search/examples.ts](../src/modules/car-search/examples.ts) - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-08  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

