# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ webhook

## –ü—Ä–æ–±–ª–µ–º–∞

–ï—Å–ª–∏ –±–æ—Ç –±—ã–ª —Å–ª—É—á–∞–π–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ webhook (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç–æ–∫–µ–Ω–∞ –≤ n8n), –æ–Ω –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ polling –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ Hetzner.

## –†–µ—à–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç webhook –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ. –ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:

```bash
npm run dev
# –∏–ª–∏
npm start
```

–í –ª–æ–≥–∞—Ö –≤—ã —É–≤–∏–¥–∏—Ç–µ:
```
‚úÖ Webhook —É–¥–∞–ª–µ–Ω, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ polling —Ä–µ–∂–∏–º
ü§ñ Bot started (polling mode)
üì± Bot @test_geodrive_check_bot connected (ID: 123456789)
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–π —Å–±—Ä–æ—Å webhook

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–±—Ä–æ—Å–∞ webhook:

```bash
npm run reset-webhook
```

–°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç:
- ‚úÖ Webhook —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω
- üì± –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–æ—Ç–µ (username, ID)
- üí° –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ –∑–∞–ø—É—Å–∫—É

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ Telegram Bot API

–ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ API:

```bash
curl -X POST "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/deleteWebhook?drop_pending_updates=true"
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ —Å–±—Ä–æ—Å–∞ webhook:

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞** –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ Hetzner:
   ```bash
   npm run dev
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∏:
   - `‚úÖ Webhook —É–¥–∞–ª–µ–Ω, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ polling —Ä–µ–∂–∏–º`
   - `ü§ñ Bot started (polling mode)`
   - `üì± Bot @test_geodrive_check_bot connected`

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã** –≤ Telegram:
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/status`
   - –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—á–∞—Ç—å

## –í–∞–∂–Ω–æ

‚ö†Ô∏è **–ù–µ –ø—É—Ç–∞—Ç—å –±–æ—Ç–æ–≤:**
- **–û—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç** (`@test_geodrive_check_bot`) - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫–æ–º–∞–Ω–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –≤ **polling —Ä–µ–∂–∏–º–µ** –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- **–ë–æ—Ç –¥–ª—è –∞–ª–µ—Ä—Ç–æ–≤** (`@n8n_alert_geodrive_bot`) - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ n8n workflows –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–í n8n –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **—Ç–æ–ª—å–∫–æ** —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ `@n8n_alert_geodrive_bot` –¥–ª—è credentials "Telegram Bot".

**–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ** —Ç–æ–∫–µ–Ω –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞ (`TELEGRAM_BOT_TOKEN`) –≤ n8n, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —É—Å—Ç–∞–Ω–æ–≤–∫–µ webhook –∏ –ø–æ—Ç–µ—Ä–µ —Å–≤—è–∑–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º.

