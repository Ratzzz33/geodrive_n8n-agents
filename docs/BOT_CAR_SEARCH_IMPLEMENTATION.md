# üöÄ –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∏—Å–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π

**–î–∞—Ç–∞:** 2025-11-17  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–ª —Ç–æ–ª—å–∫–æ 2 –∏–∑ 12 –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π  
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –±—Ä–æ–Ω–µ–π

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç –Ω–∞—Ö–æ–¥–∏—Ç **–≤—Å–µ 12 –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π** –≤–º–µ—Å—Ç–æ 2:

1. ‚úÖ Honda Fit EX (LL393DL) - 96‚Çæ/–¥–µ–Ω—å
2. ‚úÖ Hyundai Veloster (QI838QQ) - 96‚Çæ/–¥–µ–Ω—å
3. ‚úÖ **Kia Soul (ON475NN) - 96‚Çæ/–¥–µ–Ω—å** ‚Üê –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–ª—Å—è —Ä–∞–Ω—å—à–µ
4. ‚úÖ Kia Sportage (RR350FR) - 151‚Çæ/–¥–µ–Ω—å
5. ‚úÖ Mini Cabrio (RL630RL) - 168‚Çæ/–¥–µ–Ω—å
6. ‚úÖ Toyota Corolla Cross (AP589AA) - 168‚Çæ/–¥–µ–Ω—å
7. ‚úÖ BMW X1 (GG663YG) - 195‚Çæ/–¥–µ–Ω—å
8. ‚úÖ Hyundai Tucson (QQ325EQ) - 195‚Çæ/–¥–µ–Ω—å
9. ‚úÖ Volkswagen Tiguan (GT183GG) - 195‚Çæ/–¥–µ–Ω—å
10. ‚úÖ Honda Odyssey (CR106CR) - 223‚Çæ/–¥–µ–Ω—å
11. ‚úÖ MINI Hatch (SS966SJ) - 223‚Çæ/–¥–µ–Ω—å
12. ‚úÖ Kia Carnival (QL145QQ) - 250‚Çæ/–¥–µ–Ω—å

---

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### 1. –ó–∞–º–µ–Ω–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–∏—Å–∫–∞ –≤ –∫–æ–¥–µ –±–æ—Ç–∞

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –∏–∑ —Ñ–∞–π–ª–∞:
- **–§–∞–π–ª:** `setup/bot_car_search_fixed.js`
- **–§—É–Ω–∫—Ü–∏–∏:** `searchCars()` –∏ `findPriceForDays()`

### 2. –ö–ª—é—á–µ–≤—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –±—Ä–æ–Ω–µ–π

**–ë—ã–ª–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```sql
-- –ò—Å–∫–ª—é—á–∞–ª–∏—Å—å –í–°–ï —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –±—Ä–æ–Ω–∏
WHERE b.is_technical = TRUE
```

**–°—Ç–∞–ª–æ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**
```sql
-- –ò—Å–∫–ª—é—á–∞–µ–º –¢–û–õ–¨–ö–û —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –±—Ä–æ–Ω–∏ –¥–ª—è —Ä–µ–º–æ–Ω—Ç–∞
-- –°–ª—É–∂–µ–±–Ω—ã–µ –ø–æ–µ–∑–¥–∫–∏ –ù–ï –±–ª–æ–∫–∏—Ä—É—é—Ç –º–∞—à–∏–Ω—É
WHERE (
  b.technical_type = 'technical_repair'
  OR (b.is_technical = FALSE OR b.technical_type IS NULL OR b.technical_type = 'regular')
)
```

#### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –¥–∞—Ç

**–ë—ã–ª–æ:**
```sql
-- –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç, —Å—Ç—Ä–æ–≥–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
b.start_at < $3 AND b.end_at > $2
```

**–°—Ç–∞–ª–æ:**
```sql
-- –û–±–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞—Ç (start_at/end_at –ò start_date/end_date)
-- –ù–µ—Å—Ç—Ä–æ–≥–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ (<= –∏ >=)
(
  (b.start_at IS NOT NULL AND b.end_at IS NOT NULL 
   AND b.start_at <= $3::timestamptz AND b.end_at >= $2::timestamptz)
  OR (b.start_date IS NOT NULL AND b.end_date IS NOT NULL
      AND b.start_date::timestamptz <= $3::timestamptz 
      AND b.end_date::timestamptz >= $2::timestamptz)
)
```

#### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤

**–ë—ã–ª–æ:**
```sql
-- –¢–æ–ª—å–∫–æ –ø–æ–ª–µ status
WHERE status IN ('active', 'confirmed', 'in_rent')
```

**–°—Ç–∞–ª–æ:**
```sql
-- –û–±–∞ –ø–æ–ª—è (status –ò state)
WHERE (
  b.state IN ('–ê–∫—Ç–∏–≤–Ω–∞—è', '–ù–æ–≤–∞—è', '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞')
  OR b.status IN ('active', 'confirmed', 'in_rent', '–ê–∫—Ç–∏–≤–Ω–∞—è', '–ù–æ–≤–∞—è', '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞')
)
```

#### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞ —Ü–µ–Ω

**–ë—ã–ª–æ:**
```javascript
// –í—Å–µ–≥–¥–∞ –ø–µ—Ä–≤—ã–π –ø–µ—Ä–∏–æ–¥
const firstPeriod = priceData.items[0];
```

**–°—Ç–∞–ª–æ:**
```javascript
// –ù–∞—Ö–æ–¥–∏–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –¥–ª—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–Ω–µ–π
const correctPeriod = findPriceForDays(priceData.items, daysCount);
```

---

## üîß –ë—ã—Å—Ç—Ä–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–º–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º –∫–æ–¥–µ

1. –ù–∞–π–¥–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `searchCars()` –≤ –∫–æ–¥–µ –±–æ—Ç–∞
2. –ó–∞–º–µ–Ω–∏—Ç–µ –µ—ë –Ω–∞ –≤–µ—Ä—Å–∏—é –∏–∑ `setup/bot_car_search_fixed.js`
3. –î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `findPriceForDays()` –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞–∫ –º–æ–¥—É–ª—è

```javascript
import { searchCars, findPriceForDays } from './setup/bot_car_search_fixed.js';

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const cars = await searchCars(
  'batumi',
  '2025-12-28T12:00:00+04:00',
  '2026-01-03T12:00:00+04:00',
  null // –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Ü–µ–Ω–µ
);
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–æ—Ç –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏:

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞
node setup/bot_car_search_fixed.js

# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 12 –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:** `docs/BOT_CAR_SEARCH_FIXED.md`
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥:** `setup/bot_car_search_fixed.js`
- **–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏:** `setup/check_batumi_availability.mjs`

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –±—Ä–æ–Ω–∏:** –°–ª—É–∂–µ–±–Ω—ã–µ –ø–æ–µ–∑–¥–∫–∏ (`technical_type = 'technical'`) –ù–ï –±–ª–æ–∫–∏—Ä—É—é—Ç –º–∞—à–∏–Ω—É –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
2. **–§–æ—Ä–º–∞—Ç—ã –¥–∞—Ç:** –£—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –æ–±–∞ —Ñ–æ—Ä–º–∞—Ç–∞ (`start_at/end_at` –∏ `start_date/end_date`)
3. **–°—Ç–∞—Ç—É—Å—ã:** –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –æ–±–∞ –ø–æ–ª—è (`status` –∏ `state`)
4. **–ü–µ—Ä–∏–æ–¥—ã —Ü–µ–Ω:** –í—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –¥–ª—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–Ω–µ–π –∞—Ä–µ–Ω–¥—ã

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-17  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é  
**–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:** ‚úÖ –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ 12 –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π

