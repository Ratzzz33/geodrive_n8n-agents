# ‚úÖ –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ AmoCRM –≤–µ–±—Ö—É–∫–æ–≤ –∏ API

**–î–∞—Ç–∞:** 2025-11-11  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

**–†–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ API (–≤–µ–±—Ö—É–∫–∏):**
- ‚úÖ –í—Å–µ–≥–æ —Å–¥–µ–ª–æ–∫ –≤ –ë–î: **0** (–±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —á–µ—Ä–µ–∑ –≤–µ–±—Ö—É–∫–∏)
- üì• –°–æ–±—ã—Ç–∏–π –≤–µ–±—Ö—É–∫–æ–≤: **0** (–≤–µ–±—Ö—É–∫ –µ—â–µ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
- üîó –°–¥–µ–ª–æ–∫ —Å RentProg ID: **0**

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è:** –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–∞–µ–º **—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –≤–µ–±—Ö—É–∫–∏ –∏ API**, –±–µ–∑ –º–∞—Å—Å–æ–≤–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏—Å—Ç–æ—Ä–∏–∏.

---

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `amocrm_deals` —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ `amocrm_webhook_events` —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

### 2. n8n Workflow
- ‚úÖ Workflow "–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±—Ö—É–∫–æ–≤ AmoCRM" —Å–æ–∑–¥–∞–Ω (ID: `QUeNWV46WQBJCfeX`)
- ‚úÖ URL –≤–µ–±—Ö—É–∫–∞: `https://webhook.rentflow.rentals/amocrm`
- ‚ö†Ô∏è Workflow –µ—â–µ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω

### 3. Jarvis API
- ‚úÖ Endpoint `/amocrm/process-webhook` –¥–æ–±–∞–≤–ª–µ–Ω
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π ACK –¥–ª—è –≤–µ–±—Ö—É–∫–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Ç n8n

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –≤–µ–±—Ö—É–∫–æ–≤: `docs/AMOCRM_WEBHOOK_SETUP.md`
- ‚úÖ –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞: `setup/check_amocrm_parse_progress.mjs`

---

## üéØ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### –®–∞–≥ 1: –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å n8n Workflow

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://n8n.rentflow.rentals
2. –ù–∞–π–¥–∏—Ç–µ workflow "–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±—Ö—É–∫–æ–≤ AmoCRM"
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Activate"** (–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ webhook URL –∞–∫—Ç–∏–≤–µ–Ω:
   ```
   https://webhook.rentflow.rentals/amocrm
   ```

---

### –®–∞–≥ 2: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–µ–±—Ö—É–∫ –≤ AmoCRM

**–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:** `docs/AMOCRM_WEBHOOK_SETUP.md`

**–ö—Ä–∞—Ç–∫–∞—è –≤–µ—Ä—Å–∏—è:**
1. –í–æ–π–¥–∏—Ç–µ –≤ AmoCRM: https://geodrive.amocrm.ru
2. –û—Ç–∫—Ä–æ–π—Ç–µ: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –í–µ–±—Ö—É–∫–∏
3. –î–æ–±–∞–≤—å—Ç–µ –≤–µ–±—Ö—É–∫:
   - URL: `https://webhook.rentflow.rentals/amocrm`
   - –°–æ–±—ã—Ç–∏—è: –í—ã–±—Ä–∞—Ç—å –≤—Å–µ (–∏–ª–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ: lead.add, lead.update, contact.add, etc.)
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

---

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã

**–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–µ–±—Ö—É–∫–∞:**
1. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Å–¥–µ–ª–∫—É –≤ AmoCRM
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ n8n: workflow –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –ë–î: –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –≤ `amocrm_deals`

---

## üìã –ß–µ–∫–ª–∏—Å—Ç

- [ ] n8n Workflow "–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±—Ö—É–∫–æ–≤ AmoCRM" –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
- [ ] –í–µ–±—Ö—É–∫ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ AmoCRM
- [ ] URL –≤–µ–±—Ö—É–∫–∞: `https://webhook.rentflow.rentals/amocrm`
- [ ] AmoCRM API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞
- [ ] Access Token –ø–æ–ª—É—á–µ–Ω –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ n8n
- [ ] Jarvis API —Ä–∞–±–æ—Ç–∞–µ—Ç (`curl http://localhost:3000/health`)
- [ ] –¢–µ—Å—Ç–æ–≤–∞—è —Å–¥–µ–ª–∫–∞ —Å–æ–∑–¥–∞–Ω–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∞ —á–µ—Ä–µ–∑ –≤–µ–±—Ö—É–∫
- [ ] Endpoint `/amocrm/process-webhook` —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –¢–∞–±–ª–∏—Ü—ã `amocrm_deals` –∏ `amocrm_webhook_events` –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ:** `docs/AMOCRM_WEBHOOK_SETUP.md`
- **n8n UI:** https://n8n.rentflow.rentals
- **AmoCRM:** https://geodrive.amocrm.ru
- **–í–µ–±—Ö—É–∫–∏ URL:** https://webhook.rentflow.rentals/amocrm

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
- ‚úÖ –ù–æ–≤—ã–µ —Å–¥–µ–ª–∫–∏/–∫–æ–Ω—Ç–∞–∫—Ç—ã –ø—Ä–∏—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ –≤–µ–±—Ö—É–∫–∏ (0 –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ polling)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ API –∑–∞–ø—Ä–æ—Å—ã —Ç–æ–ª—å–∫–æ –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ (–∫–æ–≥–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤–µ–±—Ö—É–∫ ‚Üí 1 –∑–∞–ø—Ä–æ—Å –Ω–∞ –¥–µ—Ç–∞–ª–∏)
- ‚úÖ –õ–∏–º–∏—Ç—ã API –Ω–µ —Ä–∞—Å—Ö–æ–¥—É—é—Ç—Å—è –Ω–∞ –º–∞—Å—Å–æ–≤—ã–π –ø–∞—Ä—Å–∏–Ω–≥
- ‚úÖ –û—Å—Ç–∞–µ—Ç—Å—è ~6,900+ –∑–∞–ø—Ä–æ—Å–æ–≤/—á–∞—Å –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –°–æ–±—ã—Ç–∏–µ –≤ AmoCRM ‚Üí –≤–µ–±—Ö—É–∫ –≤ n8n (0 API –∑–∞–ø—Ä–æ—Å–æ–≤)
2. n8n ‚Üí –∑–∞–ø—Ä–æ—Å –¥–µ—Ç–∞–ª–µ–π –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ AmoCRM API v4 (1 –∑–∞–ø—Ä–æ—Å)
3. AmoCRM API ‚Üí –≤–æ–∑–≤—Ä–∞—Ç –ø–æ–ª–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
4. n8n ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Jarvis API –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
5. Jarvis API ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î

**–ò—Ç–æ–≥–æ:** ~10-100 –∑–∞–ø—Ä–æ—Å–æ–≤/—á–∞—Å (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤ AmoCRM)

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ

