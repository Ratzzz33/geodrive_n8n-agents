# –°—Ç–∞—Ç—É—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ n8n - –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. **–¢–∞–±–ª–∏—Ü—ã –≤ Neon PostgreSQL:**
   - ‚úÖ `events` - —Å–æ–∑–¥–∞–Ω–∞
   - ‚úÖ `sync_runs` - —Å–æ–∑–¥–∞–Ω–∞  
   - ‚úÖ `health` - —Å–æ–∑–¥–∞–Ω–∞

2. **Workflow –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã:**
   - ‚úÖ "RentProg Webhooks Monitor" (ID: `gNXRKIQpNubEazH7`) - Active
   - ‚úÖ "Sync Progress" (ID: `TNg2dX78ovQrgWdL`) - Active
   - ‚úÖ "Health & Status" (ID: `vNOWh8H7o5HL7fJ3`) - Active

3. **Credentials —Å–æ–∑–¥–∞–Ω—ã:**
   - ‚úÖ "Postgres account" - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Neon
   - ‚úÖ "Telegram account" - —Ç–æ–∫–µ–Ω @n8n_alert_geodrive_bot

4. **–ö–æ–¥ Jarvis –æ–±–Ω–æ–≤–ª–µ–Ω:**
   - ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π –≤ n8n —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º
   - ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
   - ‚úÖ –†–∞–∑–ª–∏—á–∏–µ –º–µ–∂–¥—É –±–æ—Ç–∞–º–∏ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö

5. **–ë—Ä–∞—É–∑–µ—Ä:**
   - ‚úÖ –ë—Ä–∞—É–∑–µ—Ä –æ—Ç–∫—Ä—ã—Ç –≤ –≤–∏–¥–∏–º–æ–º —Ä–µ–∂–∏–º–µ
   - ‚úÖ –í—Ö–æ–¥ –≤ n8n –≤—ã–ø–æ–ª–Ω–µ–Ω
   - ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü—ã workflow –¥–æ—Å—Ç—É–ø–Ω—ã

---

## ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (—á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä):

–ò–∑-–∑–∞ —Å–ª–æ–∂–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã UI n8n –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è credentials –∑–∞—Ç—Ä—É–¥–Ω–µ–Ω–∞. –ù—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Ä—É—á–Ω—É—é:

### –î–ª—è –∫–∞–∂–¥–æ–≥–æ workflow:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ workflow** (—Å—Å—ã–ª–∫–∏ –Ω–∏–∂–µ)
2. **–î–ª—è –∫–∞–∂–¥–æ–π Postgres –Ω–æ–¥—ã:**
   - –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –Ω–∞ –Ω–æ–¥—É
   - –í –ø–æ–ª–µ "Credential" –≤—ã–±–µ—Ä–∏—Ç–µ **"Postgres account"**
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

3. **–î–ª—è –∫–∞–∂–¥–æ–π Telegram –Ω–æ–¥—ã:**
   - –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –Ω–∞ –Ω–æ–¥—É
   - –í –ø–æ–ª–µ "Credential" –≤—ã–±–µ—Ä–∏—Ç–µ **"Telegram account"**
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### Workflow URLs:

- **RentProg Webhooks Monitor:** http://46.224.17.15:5678/workflow/gNXRKIQpNubEazH7
- **Sync Progress:** http://46.224.17.15:5678/workflow/TNg2dX78ovQrgWdL
- **Health & Status:** http://46.224.17.15:5678/workflow/vNOWh8H7o5HL7fJ3

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

–î–æ–±–∞–≤—å—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ –∏–ª–∏ workflow:
- `RENTPROG_HEALTH_URL` = `http://46.224.17.15:3000/rentprog/health`
- `TELEGRAM_ALERT_CHAT_ID` = `<–≤–∞—à chat id>`

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

### 1. –¢–µ—Å—Ç –≤–µ–±—Ö—É–∫–∞:
```powershell
powershell -ExecutionPolicy Bypass -File setup/test_n8n_workflows.ps1
```

–ò–ª–∏ —á–µ—Ä–µ–∑ curl:
```bash
curl -X POST "http://46.224.17.15/webhook/rentprog-webhook?branch=tbilisi" \
  -H "Content-Type: application/json" \
  -d '{"ts":"2025-01-15T12:00:00Z","branch":"tbilisi","type":"booking.issue.planned","payload":{"id":"test_123"},"ok":true}'
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- n8n ‚Üí Executions ‚Üí –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- –¢–∞–±–ª–∏—Ü–∞ `events` –≤ Neon ‚Üí –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø–∏—Å—å

### 2. –¢–µ—Å—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:
- –í Telegram: `/sync_rentprog`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—É `sync_runs` –≤ Neon

### 3. –¢–µ—Å—Ç Health:
- –î–æ–∂–¥–∏—Ç–µ—Å—å cron (5 –º–∏–Ω—É—Ç) –∏–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Ä—É—á–Ω—É—é
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—É `health` –≤ Neon

---

## üìù –§–∞–π–ª—ã —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏:

- `N8N_WORKFLOW_SETUP_FINAL.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- `TELEGRAM_BOTS.md` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–∞—Ö
- `setup/test_n8n_workflows.ps1` - —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

**–ë—Ä–∞—É–∑–µ—Ä –æ—Ç–∫—Ä—ã—Ç –∏ –≥–æ—Ç–æ–≤ –¥–ª—è —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏!** üöÄ

