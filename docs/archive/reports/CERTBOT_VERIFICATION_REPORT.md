# ‚úÖ –û—Ç—á–µ—Ç –æ –ø—Ä–æ–≤–µ—Ä–∫–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Certbot

## –°—Ç–∞—Ç—É—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

### 1. Certbot Timer
- ‚úÖ **–°—Ç–∞—Ç—É—Å:** Active (waiting) - –∞–∫—Ç–∏–≤–µ–Ω –∏ –æ–∂–∏–¥–∞–µ—Ç
- ‚úÖ **Enabled:** –î–∞, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- ‚è∞ **–°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—É—Å–∫:** Mon 2025-11-03 07:11:23 UTC (—á–µ—Ä–µ–∑ ~17 —á–∞—Å–æ–≤)
- üîÑ **–ß–∞—Å—Ç–æ—Ç–∞:** –î–≤–∞–∂–¥—ã –≤ –¥–µ–Ω—å (twice daily)

### 2. –ü–æ—Ä—Ç—ã –¥–ª—è Certbot
- ‚úÖ **80/tcp** - –æ—Ç–∫—Ä—ã—Ç –∏ —Å–ª—É—à–∞–µ—Ç (HTTP –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ–º–µ–Ω–∞)
- ‚úÖ **443/tcp** - –æ—Ç–∫—Ä—ã—Ç –∏ —Å–ª—É—à–∞–µ—Ç (HTTPS –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞)
- ‚úÖ **Firewall:** –ü–æ—Ä—Ç—ã —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –≤ UFW

### 3. DNS –∑–∞–ø–∏—Å–∏
- ‚úÖ **n8n.rentflow.rentals** ‚Üí `46.224.17.15` ‚úì
- ‚úÖ **webhook.rentflow.rentals** ‚Üí `46.224.17.15` ‚úì
- ‚úÖ –û–±–∞ –¥–æ–º–µ–Ω–∞ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä

### 4. Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ **–°–∏–Ω—Ç–∞–∫—Å–∏—Å:** OK
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞:** successful
- ‚úÖ **SSL:** –ù–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –æ–±–æ–∏—Ö –¥–æ–º–µ–Ω–æ–≤

### 5. –¢–µ–∫—É—â–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- ‚úÖ **n8n.rentflow.rentals**: –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –¥–æ 2026-01-31
- ‚úÖ **webhook.rentflow.rentals**: –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –¥–æ 2026-01-31

## –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã (–∫–∞–∫ –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏):

### ‚úÖ A-–∑–∞–ø–∏—Å–∏ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
–û–±–∞ –¥–æ–º–µ–Ω–∞ (`n8n.rentflow.rentals` –∏ `webhook.rentflow.rentals`) —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ `46.224.17.15`, –≥–¥–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç Certbot –∏ Nginx.

### ‚úÖ –ü–æ—Ä—Ç—ã 80/443 –æ—Ç–∫—Ä—ã—Ç—ã
- –ü–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã –≤ UFW firewall
- Nginx —Å–ª—É—à–∞–µ—Ç –Ω–∞ –æ–±–æ–∏—Ö –ø–æ—Ä—Ç–∞—Ö
- Certbot –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ–º–µ–Ω—ã —á–µ—Ä–µ–∑ HTTP-01 challenge

### ‚úÖ –í–µ–±-—Å–µ—Ä–≤–µ—Ä –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç —Å–µ—Ä–≤–∏—Å—ã —Å SSL
- Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–∞–∫ reverse proxy –¥–ª—è n8n –Ω–∞ `localhost:5678`
- SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ Nginx
- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å HTTP –Ω–∞ HTTPS

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:

Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç** —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –¥–≤–∞–∂–¥—ã –≤ –¥–µ–Ω—å
2. **–û–±–Ω–æ–≤–ª—è–µ—Ç** —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –∑–∞ 30 –¥–Ω–µ–π –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è
3. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç** Nginx –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä—É—á–Ω—É—é:

```bash
# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)
sudo certbot renew --dry-run

# –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
sudo certbot renew

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ Nginx –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
sudo systemctl reload nginx
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ timer:

```bash
# –°—Ç–∞—Ç—É—Å timer
sudo systemctl status certbot.timer

# –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∑–∞–ø—É—Å–∫–∞
sudo systemctl list-timers certbot.timer

# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
sudo certbot certificates
```

## –õ–æ–≥–∏ Certbot:

–õ–æ–≥–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤:
- `/var/log/letsencrypt/letsencrypt.log` - –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥
- `/var/log/certbot/` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ª–æ–≥–∏

–ü—Ä–æ—Å–º–æ—Ç—Ä:
```bash
sudo tail -f /var/log/letsencrypt/letsencrypt.log
```

## –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:

–ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –±—ã–ª –æ–±–Ω–∞—Ä—É–∂–µ–Ω –¥—Ä—É–≥–æ–π –∑–∞–ø—É—â–µ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä Certbot (–≤–æ –≤—Ä–µ–º—è dry-run). –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –µ—Å–ª–∏:
- –î—Ä—É–≥–æ–π –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- –ò–ª–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å –µ—â–µ –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è

–≠—Ç–æ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ timer, —Ç–∞–∫ –∫–∞–∫ timer —É–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–æ–º —á–µ—Ä–µ–∑ systemd.

## –ò—Ç–æ–≥:

‚úÖ **–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!**

- Certbot timer –∞–∫—Ç–∏–≤–µ–Ω –∏ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- DNS –∑–∞–ø–∏—Å–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
- –ü–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã
- Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å SSL
- –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã –¥–æ 2026-01-31

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –≤–∞—à–µ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞!** üéâ

