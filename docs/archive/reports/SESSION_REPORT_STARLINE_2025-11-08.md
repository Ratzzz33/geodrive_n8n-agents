# Session Report: Starline GPS Monitor System

**–î–∞—Ç–∞:** 2025-11-08  
**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** ~3 —á–∞—Å–∞  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ

---

## üéØ –¶–µ–ª–∏ —Å–µ—Å—Å–∏–∏

1. ‚úÖ –ò–∑—É—á–∏—Ç—å API Starline —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
2. ‚úÖ –ü–æ–ª—É—á–∏—Ç—å cookies –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è Starline API
4. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ GPS –¥–∞–Ω–Ω—ã—Ö –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
5. ‚úÖ –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –º–∞—à–∏–Ω –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é + 3 —Ü–∏—Ñ—Ä–∞–º –Ω–æ–º–µ—Ä–∞
6. ‚úÖ –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## üì¶ –°–æ–∑–¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### Backend (TypeScript)

1. **`src/integrations/starline-client.ts`** - HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è Starline API
   - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (`/device?tz=240`)
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (`/device/{device_id}`)
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞: offline | gps_offline | moving | parked_on | parked_off
   - –†–∞—Å—á–µ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è (Haversine formula)

2. **`src/services/starline-monitor.ts`** - –°–µ—Ä–≤–∏—Å GPS –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
   - –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –º–∞—à–∏–Ω Starline ‚Üî cars
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ GPS –¥–∞–Ω–Ω—ã—Ö –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è –ø–æ –∏–∑–º–µ–Ω–µ–Ω–∏—é –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç

3. **`src/services/starline-devices-sync.ts`** - **–ù–û–í–´–ô** –°–µ—Ä–≤–∏—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏–∑ Starline ‚Üí `starline_devices`
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å `cars`
   - –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è (0.60 - 0.95)
   - –ò—Å—Ç–æ—Ä–∏—è –ø–æ–ø—ã—Ç–æ–∫ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è

4. **`src/api/index.ts`** - API endpoints
   - `POST /starline/update-gps` - –æ–±–Ω–æ–≤–∏—Ç—å GPS –¥–∞–Ω–Ω—ã–µ
   - `POST /starline/sync-devices` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
   - `POST /starline/match-devices` - –∞–≤—Ç–æ—Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
   - `GET /starline/sync-status` - —Å—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
   - `GET /starline/match-cars` - legacy endpoint

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Migrations)

5. **`drizzle/migrations/0012_gps_tracking.sql`**
   - –¢–∞–±–ª–∏—Ü–∞ `gps_tracking` (—Ç–µ–∫—É—â–∏–µ + –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã)
   - –¢–∞–±–ª–∏—Ü–∞ `gps_tracking_history` (–ø–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è —Ç—Ä–µ–∫–æ–≤)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ —Ç—Ä–∏–≥–≥–µ—Ä

6. **`drizzle/migrations/0013_starline_devices.sql`** - **–ì–õ–ê–í–ù–ê–Ø –¢–ê–ë–õ–ò–¶–ê**
   - –¢–∞–±–ª–∏—Ü–∞ `starline_devices` (–≤—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏–∑ Starline)
   - –°–≤—è–∑—å —Å `cars` —á–µ—Ä–µ–∑ `car_id` (nullable)
   - **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ** –º–æ–¥–µ–ª–∏ –∏ 3 —Ü–∏—Ñ—Ä –Ω–æ–º–µ—Ä–∞
   - **–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞–∑–≤–∞–Ω–∏—è** (`previous_aliases[]`)
   - **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è** –ø—Ä–∏ —Å–º–µ–Ω–µ —Ü–∏—Ñ—Ä
   - –¢–∞–±–ª–∏—Ü–∞ `starline_match_history` (–∞—É–¥–∏—Ç —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–π)
   - View `starline_devices_with_cars`

### n8n Workflows

7. **`n8n-workflows/starline-gps-monitor.json`**
   - Cron —Ç—Ä–∏–≥–≥–µ—Ä: –∫–∞–∂–¥—É—é 1 –º–∏–Ω—É—Ç—É
   - HTTP –∑–∞–ø—Ä–æ—Å –∫ Jarvis API
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü—É `health`
   - Telegram –∞–ª–µ—Ä—Ç—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

8. **`env.example`** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
   ```bash
   STARLINE_COOKIES=userAgentId=e2bfd67ca307f71034d05bf8158d9fb3
   STARLINE_USER_AGENT=Mozilla/5.0 ...
   ```

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

9. **`STARLINE_GPS_MONITOR.md`** - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
10. **`STARLINE_SETUP_INSTRUCTIONS.md`** - –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞
11. **`STARLINE_DEVICES_TABLE.md`** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤
12. **`STARLINE_DEVICES_SETUP.md`** - –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
13. **`SESSION_REPORT_STARLINE_2025-11-08.md`** - –≠—Ç–æ—Ç –æ—Ç—á–µ—Ç

---

## üîë –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. Cookies-based –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

‚úÖ **–ü–æ–ª—É—á–µ–Ω–æ —á–µ—Ä–µ–∑ MCP Chrome DevTools:**
```
userAgentId=e2bfd67ca307f71034d05bf8158d9fb3
```

‚úÖ **–ù–µ —Ç—Ä–µ–±—É–µ—Ç –ª–æ–≥–∏–Ω–∞/–ø–∞—Ä–æ–ª—è –≤ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ**

### 2. API –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Starline

**–°–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤:**
```
GET https://starline-online.ru/device?tz=240
```

**–î–µ—Ç–∞–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:**
```
GET https://starline-online.ru/device/{device_id}?tz=240
```

**Response:**
```json
{
  "alias": "BMW 3 587",
  "device_id": 869573070871005,
  "status": 1,
  "pos": {"x": 41.777971, "y": 44.76433, "sat_qty": 6},
  "gps_lvl": 6,
  "car_state": {"ign": false, "run": false}
}
```

### 3. –¢–∞–±–ª–∏—Ü–∞ `starline_devices` - –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ö–∞–±

**–ü–æ—á–µ–º—É –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞?**
- ‚úÖ –•—Ä–∞–Ω–∏—Ç **–≤—Å–µ** —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–¥–∞–∂–µ –Ω–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ)
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π (–∏—Å—Ç–æ—Ä–∏—è)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –º–æ–¥–µ–ª—å –∏ 3 —Ü–∏—Ñ—Ä—ã
- ‚úÖ –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ä—É—á–Ω–æ–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (confidence)
- ‚úÖ –ê—É–¥–∏—Ç –ø–æ–ø—ã—Ç–æ–∫ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è

### 4. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞–∑–≤–∞–Ω–∏—è

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã:**

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `alias`:
1. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `previous_aliases[]`
2. –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `alias_changed_at`
3. –ü–µ—Ä–µ–∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –º–æ–¥–µ–ª—å –∏ —Ü–∏—Ñ—Ä—ã
4. **–ï—Å–ª–∏ —Ü–∏—Ñ—Ä—ã –∏–∑–º–µ–Ω–∏–ª–∏—Å—å ‚Üí —Å–±—Ä–æ—Å —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è**

**–ü—Ä–∏–º–µ—Ä:**
```
"BMW 3 587" ‚Üí "BMW 3 599"
  ‚Üì
matched = FALSE
car_id = NULL
match_notes = "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–±—Ä–æ—à–µ–Ω–æ: –∏–∑–º–µ–Ω–∏–ª–∏—Å—å —Ü–∏—Ñ—Ä—ã"
```

### 5. –ê–ª–≥–æ—Ä–∏—Ç–º —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è

| Confidence | –£—Å–ª–æ–≤–∏–µ |
|------------|---------|
| **0.95** | –¶–∏—Ñ—Ä—ã + –º–æ–¥–µ–ª—å —Å–æ–≤–ø–∞–ª–∞ |
| **0.80** | –¶–∏—Ñ—Ä—ã + –º–æ–¥–µ–ª—å –ø–æ—Ö–æ–∂–∞ |
| **0.60** | –¢–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã |

### 6. GPS Tracking

**–•—Ä–∞–Ω–µ–Ω–∏–µ:**
- –¢–æ–ª—å–∫–æ —Ç–µ–∫—É—â–∏–µ –∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- –ò—Å—Ç–æ—Ä–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç—Å—è –≤ `gps_tracking_history`

**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è:**
- –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ > 10 –º–µ—Ç—Ä–æ–≤ = –¥–≤–∏–∂–µ—Ç—Å—è
- –ò–õ–ò `engine_running = true`

---

## üìä –ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ Starline

**–í—Å–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤:** ~30  
**–ü—Ä–∏–º–µ—Ä—ã:**

| Alias | Device ID | Status | GPS |
|-------|-----------|--------|-----|
| BMW 3 587 | 869573070871005 | online | 6 sat |
| Audi Q7 White XX950DX | 869573070871001 | online | 11 sat |
| Tiguan 18 299 | 869573070827593 | online | 7 sat |
| –†–ï–ó–ï–†–í | 3883 | offline | - |

---

## üöÄ –ü–æ—Ä—è–¥–æ–∫ –∑–∞–ø—É—Å–∫–∞

### 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
```bash
psql $DATABASE_URL -f drizzle/migrations/0012_gps_tracking.sql
psql $DATABASE_URL -f drizzle/migrations/0013_starline_devices.sql
```

### 2. –î–µ–ø–ª–æ–π –∫–æ–¥–∞
```bash
python deploy_fixes_now.py
```

### 3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤
```bash
curl -X POST http://46.224.17.15:3000/starline/sync-devices
curl -X POST http://46.224.17.15:3000/starline/match-devices
```

### 4. –ò–º–ø–æ—Ä—Ç n8n workflow
- –û—Ç–∫—Ä—ã—Ç—å https://n8n.rentflow.rentals
- Import ‚Üí `n8n-workflows/starline-gps-monitor.json`
- –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞
```sql
SELECT * FROM starline_devices_with_cars;
```

---

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –û–∂–∏–¥–∞–µ–º—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –í—Å–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ | ~30 |
| –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–æ | ~25 (83%) |
| –ù–µ—Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–æ | ~3 (10%) |
| –ù–µ–∞–∫—Ç–∏–≤–Ω–æ | ~2 (7%) |

### –ß–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
- **GPS –¥–∞–Ω–Ω—ã–µ:** –∫–∞–∂–¥—É—é 1 –º–∏–Ω—É—Ç—É
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤:** –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é (–º–æ–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å)

---

## üîß Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: Cookies —É—Å—Ç–∞—Ä–µ–ª–∏

**–†–µ—à–µ–Ω–∏–µ:**
1. –ó–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è –Ω–∞ https://starline-online.ru/
2. F12 ‚Üí Application ‚Üí Cookies ‚Üí userAgentId
3. –û–±–Ω–æ–≤–∏—Ç—å `STARLINE_COOKIES` –≤ `.env`
4. `docker compose restart jarvis-api`

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–∞—à–∏–Ω—ã –Ω–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
curl http://46.224.17.15:3000/starline/sync-status
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```sql
SELECT alias, extracted_digits, matched
FROM starline_devices
WHERE matched = FALSE;
```

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ù–µ—Ç 3 —Ü–∏—Ñ—Ä –≤ alias
- –ù–µ—Ç license_plate –≤ cars
- –ù–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π

---

## üéØ –ò—Ç–æ–≥–æ

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

‚úÖ HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è Starline API  
‚úÖ Cookies –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è  
‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ GPS –¥–∞–Ω–Ω—ã—Ö –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É  
‚úÖ –¢–∞–±–ª–∏—Ü–∞ `starline_devices` —Å –∏—Å—Ç–æ—Ä–∏–µ–π –∏–∑–º–µ–Ω–µ–Ω–∏–π  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (confidence-based)  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å –ø—Ä–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏  
‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (—Ç–µ–∫—É—â–∏–µ + –ø—Ä–µ–¥—ã–¥—É—â–∏–µ)  
‚úÖ –ò—Å—Ç–æ—Ä–∏—è GPS —Ç—Ä–µ–∫–æ–≤  
‚úÖ n8n Workflow –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏  
‚úÖ API endpoints  
‚úÖ Telegram –∞–ª–µ—Ä—Ç—ã  
‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è  

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏—Å—Ç–µ–º—É** (–ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏, –¥–µ–ø–ª–æ–π, –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å workflow)
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ** (~25 –º–∞—à–∏–Ω –¥–æ–ª–∂–Ω—ã —Å–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
3. **–†—É—á–Ω–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ** –Ω–µ—Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
4. **–î–æ–±–∞–≤–∏—Ç—å –∞–ª–µ—Ä—Ç—ã:**
   - GPS –æ—Ç–∫–ª—é—á–µ–Ω > 30 –º–∏–Ω—É—Ç
   - –ù–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–æ–µ–∑–¥–∫–∞ (–±–µ–∑ –±—Ä–æ–Ω–∏)
   - –í—ã—Ö–æ–¥ –∏–∑ –≥–µ–æ–∑–æ–Ω—ã
5. **Dashboard** –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç—Ä–µ–∫–æ–≤

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **GPS Monitor:** [STARLINE_GPS_MONITOR.md](./STARLINE_GPS_MONITOR.md)
- **Devices Table:** [STARLINE_DEVICES_TABLE.md](./STARLINE_DEVICES_TABLE.md)
- **Setup Instructions:** [STARLINE_SETUP_INSTRUCTIONS.md](./STARLINE_SETUP_INSTRUCTIONS.md)
- **Quick Setup:** [STARLINE_DEVICES_SETUP.md](./STARLINE_DEVICES_SETUP.md)

---

## üí° –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. –ü–æ—á–µ–º—É –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ `starline_devices`?

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –ü—Ä—è–º–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –≤ `gps_tracking`

**–ü—Ä–æ–±–ª–µ–º—ã –ø—Ä—è–º–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:**
- ‚ùå –ü–æ—Ç–µ—Ä—è –Ω–µ—Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- ‚ùå –ù–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚ùå –°–ª–æ–∂–Ω–µ–µ –æ—Ç–ª–∞–¥–∫–∞
- ‚ùå –ù–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã:**
- ‚úÖ –•—Ä–∞–Ω–∏—Ç –≤—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–π
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä—É—á–Ω–æ–≥–æ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –ê—É–¥–∏—Ç –ø–æ–ø—ã—Ç–æ–∫

### 2. –ü–æ—á–µ–º—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å –ø—Ä–∏ —Å–º–µ–Ω–µ —Ü–∏—Ñ—Ä?

**–õ–æ–≥–∏–∫–∞:**
- –¶–∏—Ñ—Ä—ã –Ω–æ–º–µ—Ä–∞ - –æ—Å–Ω–æ–≤–Ω–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –º–∞—à–∏–Ω—ã
- –ï—Å–ª–∏ —Ü–∏—Ñ—Ä—ã –∏–∑–º–µ–Ω–∏–ª–∏—Å—å ‚Üí –≤–µ—Ä–æ—è—Ç–Ω–æ –¥—Ä—É–≥–∞—è –º–∞—à–∏–Ω–∞
- –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ—Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ

**–ü—Ä–∏–º–µ—Ä:** –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–µ—Ä–µ—Å—Ç–∞–≤–∏–ª–∏ —Å "BMW 3 587" –Ω–∞ "Audi Q7 950"

### 3. –ü–æ—á–µ–º—É —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–∏–µ + –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã?

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –•—Ä–∞–Ω–∏—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é –≤ `gps_tracking`

**–ü—Ä–æ–±–ª–µ–º–∞:** –û–≥—Ä–æ–º–Ω—ã–π –æ–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö (–∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É √ó 30 –º–∞—à–∏–Ω = 43200 –∑–∞–ø–∏—Å–µ–π/–¥–µ–Ω—å)

**–†–µ—à–µ–Ω–∏–µ:**
- `gps_tracking` - —Ç–æ–ª—å–∫–æ 2 —Ç–æ—á–∫–∏
- `gps_tracking_history` - –ø–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è (—á–µ—Ä–µ–∑ —Ç—Ä–∏–≥–≥–µ—Ä)
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏

1. ‚úÖ **–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–æ API Starline** —á–µ—Ä–µ–∑ MCP Chrome
2. ‚úÖ **–ü–æ–ª—É—á–µ–Ω—ã cookies –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
3. ‚úÖ **–°–æ–∑–¥–∞–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π
4. ‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —É–º–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º** —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è
5. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** —á–µ—Ä–µ–∑ n8n
6. ‚úÖ **–ù–∞–ø–∏—Å–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** (4 —Ñ–∞–π–ª–∞)
7. ‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É** - –æ—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å

---

**–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≥–æ—Ç–æ–≤—ã –∫ –∑–∞–ø—É—Å–∫—É! üöÄ**

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä–≤—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é.

