# –°—Ç–∞—Ç—É—Å –æ—Ç–ª–∞–¥–∫–∏ –≤–µ–±—Ö—É–∫–æ–≤ - –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç

**–î–∞—Ç–∞:** 2025-11-02 22:01  
**–°—Ç–∞—Ç—É—Å:** –í –ø—Ä–æ—Ü–µ—Å—Å–µ –æ—Ç–ª–∞–¥–∫–∏

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–í–µ–±—Ö—É–∫–∏ –¥–æ—Ö–æ–¥—è—Ç –¥–æ n8n** ‚úÖ
   - DEBUG —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ Telegram
   - Execution —É—Å–ø–µ—à–µ–Ω (ID: 48)
   - HTTP –æ—Ç–≤–µ—Ç: 200 OK

2. **PostgreSQL credentials —Ä–∞–±–æ—Ç–∞—é—Ç** ‚úÖ
   - –ü—Ä—è–º–∞—è –≤—Å—Ç–∞–≤–∫–∞ –≤ –ë–î —É—Å–ø–µ—à–Ω–∞
   - –¢–∞–±–ª–∏—Ü–∞ `events` –¥–æ—Å—Ç—É–ø–Ω–∞
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

3. **Debug –Ω–æ–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç** ‚úÖ
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ Telegram
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π JSON –∑–∞–ø—Ä–æ—Å–∞

---

## ‚ùå –ü—Ä–æ–±–ª–µ–º—ã

### 1. –ó–∞–ø–∏—Å—å –≤ –ë–î –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ workflow

**–ü—Ä–æ–±–ª–µ–º–∞:** Execution —É—Å–ø–µ—à–µ–Ω, –Ω–æ –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ `events` –Ω–µ—Ç

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- –û—à–∏–±–∫–∞ –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏–∏ `queryParameters` (–ø–æ–¥–∞–≤–ª–µ–Ω–∞ `onError: continueRegularOutput`)
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –≤ queryParameters
- SQL –∑–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π, –Ω–æ –æ—à–∏–±–∫–∞ –Ω–µ –≤–∏–¥–Ω–∞

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ execution 48 –≤ n8n UI
2. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–¥—É "Save Event"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - –ï—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏ –≤ Output?
   - –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "Output" –Ω–æ–¥—ã?
   - –í—ã–ø–æ–ª–Ω–∏–ª—Å—è –ª–∏ SQL –∑–∞–ø—Ä–æ—Å?

---

### 2. –õ–æ–≥–∏–∫–∞ "If Error" –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞

**–ë—ã–ª–æ:** `ok != false` (operation: "not") - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–ª–∞ –æ—à–∏–±–∫–∏  
**–°—Ç–∞–ª–æ:** `ok === false` (operation: "equals") - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–µ–ø–µ—Ä—å Error Alert –¥–æ–ª–∂–µ–Ω —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ `ok: false`

---

## üìä –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ Telegram

**DEBUG —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–∫–∞–∑–∞–ª–æ:**
```json
{
  "body": {
    "ts": "2025-11-02T18:59:22.005Z",
    "branch": "tbilisi",
    "type": "booking.issue.planned",
    "payload": {
      "id": "testwebhook1762109962005",
      "rentprogid": "test1762109962005"  // ‚Üê –±–µ–∑ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è!
    },
    "ok": true
  }
}
```

**–í–∞–∂–Ω–æ:** –ö–ª—é—á–∏ –≤ payload –º–æ–≥—É—Ç –±—ã—Ç—å:
- `payload.id` ‚úÖ
- `payload.rentprogid` (–±–µ–∑ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è) ‚úÖ
- `payload.rentprog_id` (—Å –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ–º) ‚úÖ

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –í—ã—Ä–∞–∂–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –æ–±–æ–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤

---

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã

1. ‚úÖ –õ–æ–≥–∏–∫–∞ "If Error" –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ (`ok === false`)
2. ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–æ–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –∫–ª—é—á–µ–π (`rentprogid` –∏ `rentprog_id`)
3. ‚úÖ Debug –Ω–æ–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞
4. ‚úÖ Workflow –æ–±–Ω–æ–≤–ª–µ–Ω –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω

---

## üéØ –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ–π—á–∞—Å

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ execution 48 –≤ n8n UI

1. –û—Ç–∫—Ä–æ–π—Ç–µ workflow "RentProg Webhooks Monitor"
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Executions"
3. –û—Ç–∫—Ä–æ–π—Ç–µ execution 48 (–ø–æ—Å–ª–µ–¥–Ω–∏–π)
4. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–¥—É "Save Event"
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - –ï—Å—Ç—å –ª–∏ –¥–∞–Ω–Ω—ã–µ –≤ Output?
   - –ï—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏?
   - –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "Error" —Ç–∞–±?

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Telegram

- –î–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ DEBUG —Å–æ–æ–±—â–µ–Ω–∏–µ (–±–µ–∑ Error Alert)
- –ï—Å–ª–∏ Error Alert –ø—Ä–∏—à–µ–ª ‚Üí –ª–æ–≥–∏–∫–∞ –≤—Å–µ –µ—â–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ë–î

–ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ execution –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã—Ä–∞–∂–µ–Ω–∏—è:
```bash
node setup/check_test_event.mjs
```

---

## üí° –í–µ—Ä–æ—è—Ç–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å –ë–î

–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏–∏ queryParameters:
- –°–ª–æ–∂–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ —Ç–µ—Ä–Ω–∞—Ä–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏
- –í–æ–∑–º–æ–∂–Ω–æ –æ—à–∏–±–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
- –û—à–∏–±–∫–∞ –ø–æ–¥–∞–≤–ª—è–µ—Ç—Å—è `onError: continueRegularOutput`

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–µ—Ç–∞–ª–∏ execution 48 –≤ UI n8n - —Ç–∞–º –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã –æ—à–∏–±–∫–∏ –Ω–æ–¥—ã "Save Event".

---

**–û—Ç—á–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω:** 2025-11-02 22:01:40
