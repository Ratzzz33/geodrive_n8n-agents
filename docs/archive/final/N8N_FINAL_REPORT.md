# –û—Ç—á–µ—Ç: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ n8n –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ RentProg

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã 3 —Ç–∞–±–ª–∏—Ü—ã –≤ Neon PostgreSQL:
  - `events` - —Å–æ–±—ã—Ç–∏—è –≤–µ–±—Ö—É–∫–æ–≤
  - `sync_runs` - –ø—Ä–æ–≥—Ä–µ—Å—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
  - `health` - health check —Å—Ç–∞—Ç—É—Å—ã

### 2. Workflow –≤ n8n
- ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã 3 workflow:
  - "RentProg Webhooks Monitor" (ID: `gNXRKIQpNubEazH7`) - **Active**
  - "Sync Progress" (ID: `TNg2dX78ovQrgWdL`) - **Active**
  - "Health & Status" (ID: `vNOWh8H7o5HL7fJ3`) - **Active`

### 3. Credentials
- ‚úÖ "Postgres account" - —Å–æ–∑–¥–∞–Ω (–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Neon)
- ‚úÖ "Telegram account" - —Å–æ–∑–¥–∞–Ω (—Ç–æ–∫–µ–Ω @n8n_alert_geodrive_bot)

### 4. –ö–æ–¥ Jarvis
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `src/integrations/n8n.ts` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π —Å branch –≤ query
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `src/bot/index.ts` - –ø—Ä–æ–≥—Ä–µ—Å—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫–∞–∂–¥—ã–µ 20 –∑–∞–ø–∏—Å–µ–π
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ —Ä–∞–∑–ª–∏—á–∏–∏ –±–æ—Ç–æ–≤

### 5. –ë—Ä–∞—É–∑–µ—Ä
- ‚úÖ –ë—Ä–∞—É–∑–µ—Ä –∑–∞–ø—É—â–µ–Ω –≤ **–≤–∏–¥–∏–º–æ–º —Ä–µ–∂–∏–º–µ** (headless: false)
- ‚úÖ –í—Ö–æ–¥ –≤ n8n –≤—ã–ø–æ–ª–Ω–µ–Ω (33pokrov33@gmail.com)
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü—ã workflow –¥–æ—Å—Ç—É–ø–Ω—ã

---

## ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (5-10 –º–∏–Ω—É—Ç):

–ò–∑-–∑–∞ —Å–ª–æ–∂–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã UI n8n (React/Vue, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞), –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è credentials —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä –∑–∞—Ç—Ä—É–¥–Ω–µ–Ω–∞. **–ù—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Ä—É—á–Ω—É—é:**

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ –∫–∞–∂–¥—ã–π workflow

**RentProg Webhooks Monitor:**
http://46.224.17.15:5678/workflow/gNXRKIQpNubEazH7

**Sync Progress:**
http://46.224.17.15:5678/workflow/TNg2dX78ovQrgWdL

**Health & Status:**
http://46.224.17.15:5678/workflow/vNOWh8H7o5HL7fJ3

### –®–∞–≥ 2: –ù–∞–∑–Ω–∞—á—å—Ç–µ credentials –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–æ–¥—ã

–î–ª—è **Postgres –Ω–æ–¥:**
1. –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –Ω–∞ –Ω–æ–¥—É (–∏–ª–∏ –ø—Ä–∞–≤—ã–π –∫–ª–∏–∫ ‚Üí Edit)
2. –í –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏ –Ω–∞–π–¥–∏—Ç–µ –ø–æ–ª–µ **"Credential"**
3. –í—ã–±–µ—Ä–∏—Ç–µ **"Postgres account"**
4. –ó–∞–∫—Ä–æ–π—Ç–µ –ø–∞–Ω–µ–ª—å (–∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ)

–î–ª—è **Telegram –Ω–æ–¥:**
1. –î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –Ω–∞ –Ω–æ–¥—É
2. –í –ø–æ–ª–µ **"Credential"** –≤—ã–±–µ—Ä–∏—Ç–µ **"Telegram account"**
3. –ó–∞–∫—Ä–æ–π—Ç–µ –ø–∞–Ω–µ–ª—å

### –®–∞–≥ 3: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ –∏–ª–∏ –∫–∞–∂–¥–æ–≥–æ workflow:
- `RENTPROG_HEALTH_URL` = `http://46.224.17.15:3000/rentprog/health`
- `TELEGRAM_ALERT_CHAT_ID` = `<–≤–∞—à chat id>`

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

### –¢–µ—Å—Ç 1: Webhook
```powershell
powershell -ExecutionPolicy Bypass -File setup/test_n8n_workflows.ps1
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- n8n ‚Üí Executions ‚Üí "RentProg Webhooks Monitor"
- –¢–∞–±–ª–∏—Ü–∞ `events` –≤ Neon

### –¢–µ—Å—Ç 2: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- –í Telegram: `/sync_rentprog`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—É `sync_runs`

### –¢–µ—Å—Ç 3: Health Check
- –î–æ–∂–¥–∏—Ç–µ—Å—å cron (5 –º–∏–Ω—É—Ç)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—É `health`

---

## üìä URLs –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞:

**Workflow:**
- RentProg Webhooks Monitor: http://46.224.17.15:5678/workflow/gNXRKIQpNubEazH7
- Sync Progress: http://46.224.17.15:5678/workflow/TNg2dX78ovQrgWdL
- Health & Status: http://46.224.17.15:5678/workflow/vNOWh8H7o5HL7fJ3

**Executions:**
http://46.224.17.15:5678/projects/YeYimRJroeGbDN4w/executions

**Credentials:**
http://46.224.17.15:5678/projects/YeYimRJroeGbDN4w/credentials

---

**–ë—Ä–∞—É–∑–µ—Ä –æ—Ç–∫—Ä—ã—Ç –∏ –≥–æ—Ç–æ–≤ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏!** üéØ

