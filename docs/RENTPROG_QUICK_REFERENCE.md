# RentProg API - –ö—Ä–∞—Ç–∫–∏–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫

‚ö†Ô∏è **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ö –ü–†–û–ß–¢–ï–ù–ò–Æ –î–õ–Ø –í–°–ï–• –†–ê–ó–†–ê–ë–û–¢–ß–ò–ö–û–í**

---

## üö¶ Rate Limits (–ö–†–ò–¢–ò–ß–ù–û!)

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –ª–∏–º–∏—Ç—ã RentProg:

| –û–ø–µ—Ä–∞—Ü–∏—è | –õ–∏–º–∏—Ç RentProg/–º–∏–Ω |
|----------|-------------------|
| **GET (—á—Ç–µ–Ω–∏–µ)** | 120 |
| **POST/PUT (–∑–∞–ø–∏—Å—å)** | 60 |
| **Search (–ø–æ–∏—Å–∫)** | 30 |
| **Auth (—Ç–æ–∫–µ–Ω—ã)** | 60 |

### ‚ö†Ô∏è –ù–∞—à–∏ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ –ª–∏–º–∏—Ç—ã (—Å –∑–∞–ø–∞—Å–æ–º –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤):

| –û–ø–µ—Ä–∞—Ü–∏—è | –ù–∞—à –ª–∏–º–∏—Ç/–º–∏–Ω | –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ | –ó–∞–ø–∞—Å –¥–ª—è –¥—Ä—É–≥–∏—Ö |
|----------|--------------|--------------------------|------------------|
| **GET (—á—Ç–µ–Ω–∏–µ)** | **40** | **~1.5 —Å–µ–∫** ‚ö° | 80/–º–∏–Ω |
| **POST/PUT (–∑–∞–ø–∏—Å—å)** | **20** | **~3 —Å–µ–∫** | 40/–º–∏–Ω |
| **Search (–ø–æ–∏—Å–∫)** | **10** | **~6 —Å–µ–∫** | 20/–º–∏–Ω |
| **Auth (—Ç–æ–∫–µ–Ω—ã)** | **–ö—ç—à–∏—Ä–æ–≤–∞—Ç—å!** | 1 —Ç–æ–∫–µ–Ω –Ω–∞ 4 –º–∏–Ω | 56/–º–∏–Ω |

**–ü—Ä–∏–Ω—Ü–∏–ø:** –ò—Å–ø–æ–ª—å–∑—É–µ–º ~33% –æ—Ç –ª–∏–º–∏—Ç–∞, –æ—Å—Ç–∞–≤–ª—è—è 66% –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –∫–æ–º–ø–∞–Ω–∏–∏!

**–ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏:** HTTP 429 ‚Üí –ø–æ–¥–æ–∂–¥–∞—Ç—å 60 —Å–µ–∫—É–Ω–¥

---

## ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

```typescript
// ‚úÖ –î–ê - –æ–¥–∏–Ω —Ç–æ–∫–µ–Ω –Ω–∞ 4 –º–∏–Ω—É—Ç—ã
const token = await getCachedBranchToken(branch);

// ‚ùå –ù–ï–¢ - –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å
const token = await getBranchTokenWithExpiry(branchKey);
```

**–ü—Ä–∏—á–∏–Ω–∞:** Request token –∂–∏–≤–µ—Ç ~240 —Å–µ–∫—É–Ω–¥. –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å = —Ç—Ä–∞—Ç–∞ –ª–∏–º–∏—Ç–∞.

### 2. –ó–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏

```typescript
// ‚úÖ –î–ê - –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞ (–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞–ø–∞—Å –¥—Ä—É–≥–∏–º)
for (const item of items) {
  await processItem(item);
  await sleep(1500); // 1.5 —Å–µ–∫ = 40 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω (–æ—Å—Ç–∞–≤–ª—è–µ–º 80 –¥–ª—è –¥—Ä—É–≥–∏—Ö!)
}

// ‚ùå –ù–ï–¢ - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –±–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª—è
await Promise.all(items.map(processItem)); // Rate limit!

// ‚ùå –ù–ï–¢ - —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã
for (const item of items) {
  await processItem(item);
  await sleep(500); // 120 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω - –∑–∞–±–∏—Ä–∞–µ—Ç –≤–µ—Å—å –ª–∏–º–∏—Ç —É –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤!
}
```

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ 429

```typescript
// ‚úÖ –î–ê - retry —Å backoff
try {
  return await apiFetch(branch, path);
} catch (error) {
  if (error.status === 429) {
    await sleep(60000); // –ü–æ–¥–æ–∂–¥–∞—Ç—å –º–∏–Ω—É—Ç—É
    return await apiFetch(branch, path);
  }
  throw error;
}
```

---

## üî¢ –†–∞—Å—á–µ—Ç –Ω–∞–≥—Ä—É–∑–∫–∏

### –ü—Ä–∏–º–µ—Ä: –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

- 4 —Ñ–∏–ª–∏–∞–ª–∞ √ó 50 –∞–≤—Ç–æ = 200 –∑–∞–ø–∏—Å–µ–π
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è: 20/—Å—Ç—Ä–∞–Ω–∏—Ü—É = 10 —Å—Ç—Ä–∞–Ω–∏—Ü √ó 4 = 40 –∑–∞–ø—Ä–æ—Å–æ–≤
- –° –∑–∞–¥–µ—Ä–∂–∫–æ–π 1.5 —Å–µ–∫: 40 √ó 1.5 = **60 —Å–µ–∫—É–Ω–¥** + –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É —Ñ–∏–ª–∏–∞–ª–∞–º–∏ (~9 —Å–µ–∫) = **~70 —Å–µ–∫—É–Ω–¥**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º 40 –∏–∑ 120 GET/–º–∏–Ω, –æ—Å—Ç–∞–≤–ª—è–µ–º 80 –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤!

### –ö–æ–≥–¥–∞ –≤–æ–∑–º–æ–∂–µ–Ω rate limit:

- ‚ùå –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —Ñ–∏–ª–∏–∞–ª–æ–≤
- ‚ùå –ó–∞–ø—Ä–æ—Å —Ç–æ–∫–µ–Ω–∞ –Ω–∞ –∫–∞–∂–¥—É—é –æ–ø–µ—Ä–∞—Ü–∏—é
- ‚ùå –ü–æ–∏—Å–∫ –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫ (–ª–∏–º–∏—Ç 30/–º–∏–Ω!)
- ‚ùå –ú–∞—Å—Å–æ–≤—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑ batch

---

## üìã Checklist –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

- [ ] –¢–æ–∫–µ–Ω—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è (TTL ~240 —Å–µ–∫—É–Ω–¥)
- [ ] –ó–∞–¥–µ—Ä–∂–∫–∏ 500-1000ms –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ HTTP 429 —Å retry
- [ ] –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏ –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] –ù–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –±–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª—è

---

## üõ†Ô∏è –ì–æ—Ç–æ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã

### –í –∫–æ–¥–µ –ø—Ä–æ–µ–∫—Ç–∞:

```typescript
// src/integrations/rentprog.ts
export async function getCachedBranchToken(branch: BranchName): Promise<string>
export async function apiFetch<T>(branch: BranchName, path: string): Promise<T>
export async function paginate<T>(branch: BranchName, path: string): Promise<T[]>
```

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ **—É–∂–µ —É—á–∏—Ç—ã–≤–∞—é—Ç rate limits**:
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ Retry –Ω–∞ 429
- ‚úÖ –ó–∞–¥–µ—Ä–∂–∫–∏ –≤ paginate()

### –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö, –Ω–µ –∏–∑–æ–±—Ä–µ—Ç–∞–π—Ç–µ –≤–µ–ª–æ—Å–∏–ø–µ–¥!

---

## üö® –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

### 1. "429 Too Many Requests" –ø–æ—Å–ª–µ 5 –∑–∞–ø—Ä–æ—Å–æ–≤

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Ç –∑–∞–¥–µ—Ä–∂–µ–∫ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
await sleep(600); // –º–µ–∂–¥—É –∫–∞–∂–¥—ã–º –∑–∞–ø—Ä–æ—Å–æ–º
```

### 2. "429 Too Many Requests" —Å—Ä–∞–∑—É –Ω–∞ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ

**–ü—Ä–∏—á–∏–Ω–∞:** –î—Ä—É–≥–æ–π –ø—Ä–æ—Ü–µ—Å—Å –∏–∑—Ä–∞—Å—Ö–æ–¥–æ–≤–∞–ª –ª–∏–º–∏—Ç

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// –ü–æ–¥–æ–∂–¥–∞—Ç—å –º–∏–Ω—É—Ç—É
await sleep(60000);
```

### 3. –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ 429 –Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é

**–ü—Ä–∏—á–∏–Ω–∞:** –¢–æ–∫–µ–Ω—ã –Ω–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ getCachedBranchToken() –≤–º–µ—Å—Ç–æ getBranchTokenWithExpiry()
```

---

## üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–∏–º–∏—Ç—ã –∏ –ø—Ä–∏–º–µ—Ä—ã](./RENTPROG_API_LIMITS.md)
- [RentProg Integration Guide](../WORKING_SOLUTIONS.md#rentprog)
- [–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è](../src/integrations/rentprog.ts)

---

**–ü–æ–º–Ω–∏—Ç–µ:** RentProg –ª–∏–º–∏—Ç—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏. –°–æ–±–ª—é–¥–∞–π—Ç–µ –∏—Ö, –∏ –≤—Å—ë –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –æ—Ç–ª–∏—á–Ω–æ! üöÄ

