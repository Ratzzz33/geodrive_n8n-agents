# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤ –≤–µ–±—Ö—É–∫–æ–≤ - –ö—Ä–∞—Ç–∫–∏–π –æ—Ç—á–µ—Ç

**–î–∞—Ç–∞:** 2025-01-15  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

---

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### –î–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```
https://geodrive.netlify.app/webhooks/rentprog/{branch}
```
- –û—Ç–¥–µ–ª—å–Ω—ã–π URL –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∏–ª–∏–∞–ª–∞
- –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Netlify

### –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–ü—Ä–æ–¥–∞–∫—à–Ω:**
```
https://webhook.rentflow.rentals
```
- –û–¥–∏–Ω –æ–±—â–∏–π –∞–¥—Ä–µ—Å –¥–ª—è –≤—Å–µ—Ö —Ñ–∏–ª–∏–∞–ª–æ–≤
- –ü—Ä—è–º–æ–π –¥–æ–º–µ–Ω —Å SSL
- –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Nginx –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

**–¢–µ—Å—Ç–æ–≤—ã–π (—Å–æ—Ö—Ä–∞–Ω–µ–Ω):**
```
https://geodrive.netlify.app/webhook/rentprog-webhook
```

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è

‚úÖ **–ï–¥–∏–Ω—ã–π –∞–¥—Ä–µ—Å** - –ø—Ä–æ—â–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ RentProg  
‚úÖ **–õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–µ–∑ Netlify  
‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç  
‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –ø–æ–ª–Ω—ã–µ –ª–æ–≥–∏ –≤ Nginx  
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π  

---

## –î–µ–π—Å—Ç–≤–∏—è

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

1. **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
   - –ù–∞—Å—Ç—Ä–æ–µ–Ω Nginx –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ 46.224.17.15
   - –ü–æ–ª—É—á–µ–Ω SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –æ—Ç Let's Encrypt (–¥–æ 2026-01-31)
   - DNS –Ω–∞—Å—Ç—Ä–æ–µ–Ω: webhook.rentflow.rentals ‚Üí 46.224.17.15

2. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
   - –°–æ–∑–¥–∞–Ω [WEBHOOK_URLS_UPDATE.md](./WEBHOOK_URLS_UPDATE.md) - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
   - –°–æ–∑–¥–∞–Ω [WEBHOOKS_SETUP_GUIDE.md](./WEBHOOKS_SETUP_GUIDE.md) - –∫—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
   - –û–±–Ω–æ–≤–ª–µ–Ω [README.md](./README.md) —Å –Ω–æ–≤—ã–º–∏ –∞–¥—Ä–µ—Å–∞–º–∏
   - –û–±–Ω–æ–≤–ª–µ–Ω [SESSION_REPORT_2025-01-15.md](./SESSION_REPORT_2025-01-15.md)
   - –û–±–Ω–æ–≤–ª–µ–Ω [netlify.toml](./netlify.toml) —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏

3. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
   - Nginx: `/etc/nginx/sites-available/webhook.rentflow.rentals.conf`
   - n8n webhook path: `rentprog-webhook` (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
   - Docker: –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `WEBHOOK_URL` –∏ `N8N_WEBHOOK_URL`

### ‚è≥ –¢—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ RentProg

**–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–µ–±—Ö—É–∫–∏ –≤ –∞–¥–º–∏–Ω–∫–µ RentProg:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π/–≤–µ–±—Ö—É–∫–æ–≤ –≤ RentProg
2. –î–ª—è **–∫–∞–∂–¥–æ–≥–æ —Ñ–∏–ª–∏–∞–ª–∞** (Tbilisi, Batumi, Kutaisi, Rustavi):
   - URL: `https://webhook.rentflow.rentals`
   - –ú–µ—Ç–æ–¥: POST
   - –ê–∫—Ç–∏–≤–µ–Ω: ‚úÖ
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –≤–µ–±—Ö—É–∫

**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** [WEBHOOKS_SETUP_GUIDE.md](./WEBHOOKS_SETUP_GUIDE.md)

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –¢–µ—Å—Ç 1: –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–æ–º–µ–Ω–∞
```bash
curl -I https://webhook.rentflow.rentals
# –û–∂–∏–¥–∞–µ—Ç—Å—è: HTTP/2 200
```
‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ: —Ä–∞–±–æ—Ç–∞–µ—Ç

### –¢–µ—Å—Ç 2: DNS
```bash
nslookup webhook.rentflow.rentals
# –û–∂–∏–¥–∞–µ—Ç—Å—è: 46.224.17.15
```
‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ: –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

### –¢–µ—Å—Ç 3: SSL
```bash
openssl s_client -connect webhook.rentflow.rentals:443 -servername webhook.rentflow.rentals
# –û–∂–∏–¥–∞–µ—Ç—Å—è: —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –æ—Ç Let's Encrypt
```
‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ: –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –¥–æ 2026-01-31

### –¢–µ—Å—Ç 4: –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –≤–µ–±—Ö—É–∫–∞
```bash
curl -X POST "https://webhook.rentflow.rentals" \
  -H "Content-Type: application/json" \
  -d '{"event":"test","payload":{"id":"123"}}'

# –û–∂–∏–¥–∞–µ—Ç—Å—è: {"ok": true, "received": true}
```
‚è≥ –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ RentProg

### –¢–µ—Å—Ç 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ n8n
- URL: http://46.224.17.15:5678/projects/YeYimRJroeGbDN4w/executions
- Workflow: "RentProg Webhooks Monitor"
‚è≥ –ë—É–¥—É—Ç executions –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ RentProg

### –¢–µ—Å—Ç 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î
```sql
SELECT * FROM events ORDER BY ts DESC LIMIT 10;
```
‚è≥ –°–æ–±—ã—Ç–∏—è –ø–æ—è–≤—è—Ç—Å—è –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ RentProg

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (—Ñ–∏–Ω–∞–ª—å–Ω–∞—è)

```
RentProg (–≤—Å–µ —Ñ–∏–ª–∏–∞–ª—ã)
    ‚Üì POST https://webhook.rentflow.rentals
Nginx (46.224.17.15:443)
    ‚Üì SSL termination
Proxy –∫ localhost:5678/webhook/rentprog-webhook
    ‚Üì
n8n: RentProg Webhooks Monitor
    ‚Üì < 100ms
INSERT INTO events ... ON CONFLICT DO NOTHING
    ‚Üì
Respond: {"ok": true, "received": true}
    
--- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (cron 5 –º–∏–Ω—É—Ç) ---
    
n8n: RentProg Upsert Processor
    ‚Üì
SELECT * FROM events WHERE processed = false
    ‚Üì
HTTP POST ‚Üí Jarvis API /process-event
    ‚Üì
Auto-fetch –∏–∑ RentProg API
    ‚Üì
Upsert –≤ –ë–î (cars, clients, bookings)
    ‚Üì
UPDATE events SET processed = true
```

---

## –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–¢–µ—Å—Ç–æ–≤—ã–π –∞–¥—Ä–µ—Å **—Å–æ—Ö—Ä–∞–Ω–µ–Ω** –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```
https://geodrive.netlify.app/webhook/rentprog-webhook
```

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è:
- –õ–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –û—Ç–ª–∞–¥–∫–∏ –±–µ–∑ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚è≥ **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä RentProg:**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–µ–±—Ö—É–∫–∏ –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ [WEBHOOKS_SETUP_GUIDE.md](./WEBHOOKS_SETUP_GUIDE.md)
   - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –≤–µ–±—Ö—É–∫
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ n8n executions

2. ‚è≥ **–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å executions –≤ n8n –ø–µ—Ä–≤—ã–µ 24 —á–∞—Å–∞
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Nginx: `/var/log/nginx/webhook-*.log`
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–æ–±—ã—Ç–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è (processed = true)

3. ‚úÖ **–ì–æ—Ç–æ–≤–æ:**
   - –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - Telegram alerts –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
   - –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

---

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- üìã [WEBHOOKS_SETUP_GUIDE.md](./WEBHOOKS_SETUP_GUIDE.md) - **–ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**
- üìñ [WEBHOOK_URLS_UPDATE.md](./WEBHOOK_URLS_UPDATE.md) - –ü–æ–ª–Ω–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- üìä [SESSION_REPORT_2025-01-15.md](./SESSION_REPORT_2025-01-15.md) - –û—Ç—á–µ—Ç –æ –≤—Å–µ–π —Ä–∞–±–æ—Ç–µ
- üè† [README.md](./README.md) - –û–±—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

- **n8n Console:** http://46.224.17.15:5678
- **Telegram Bot:** `/status` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏—Å—Ç–µ–º—ã
- **GitHub Issues:** –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –±–∞–≥–æ–≤

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –≥–æ—Ç–æ–≤–æ  
**–¢—Ä–µ–±—É–µ—Ç—Å—è:** –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ RentProg –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º  
**ETA:** 5-10 –º–∏–Ω—É—Ç –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫—É  
**–†–∏—Å–∫–∏:** –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ, —Ç–µ—Å—Ç–æ–≤—ã–π –∞–¥—Ä–µ—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω –¥–ª—è –æ—Ç–∫–∞—Ç–∞

