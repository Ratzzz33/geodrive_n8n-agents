# –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. Error Handling

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –æ—à–∏–±–∫–µ workflow –ø–∞–¥–∞–ª –±–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `onError: "continueRegularOutput"` –≤–æ –≤—Å–µ –Ω–æ–¥—ã (Webhook, Save Event, Telegram Alert)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `onError: "continueErrorOutput"` –≤ If Error –Ω–æ–¥—É
- ‚úÖ –¢–µ–ø–µ—Ä—å –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è, workflow –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

---

### 2. –ó–∞–ø–∏—Å—å –≤ –ë–î –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** Execution —É—Å–ø–µ—à–µ–Ω, –Ω–æ –∑–∞–ø–∏—Å–∏ –≤ `events` –Ω–µ—Ç

**–ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ optional chaining (`?.`) –≤ n8n expressions - –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
2. –í–æ–∑–º–æ–∂–Ω–æ credentials –Ω–µ –Ω–∞–∑–Ω–∞—á–µ–Ω—ã

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- ‚úÖ –£–±—Ä–∞–ª optional chaining –∏–∑ –≤—Å–µ—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –ó–∞–º–µ–Ω–∏–ª –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–µ—Ä–µ–∑ `&&` –∏ —Ç–µ—Ä–Ω–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω workflow –≤ n8n

**–¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ n8n UI ‚Üí workflow "RentProg Webhooks Monitor"
2. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–¥—É "Save Event"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—ã–±—Ä–∞–Ω credential "PostgreSQL"
4. –ï—Å–ª–∏ –Ω–µ—Ç - —Å–æ–∑–¥–∞–π—Ç–µ credential —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∏–∑ `claude.md`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω, —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ credentials

---

### 3. –ù–µ –≤–∏–¥–Ω–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –≤–µ–±—Ö—É–∫–∞ –≤ UI

**–ü—Ä–æ–±–ª–µ–º–∞:** Execution –µ—Å—Ç—å, –Ω–æ –Ω–µ –≤–∏–¥–Ω–æ –≤ UI

**–†–µ—à–µ–Ω–∏–µ:**
- Executions –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ä–∞–∑–¥–µ–ª–µ "Executions" workflow
- Execution 43-46 —É—Å–ø–µ—à–Ω—ã (status: success)
- –û—Ç–∫—Ä–æ–π—Ç–µ workflow ‚Üí Executions ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π execution

**–°—Ç–∞—Ç—É—Å:** ‚úÖ Executions –µ—Å—Ç—å, –Ω—É–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –≤ UI

---

### 4. –†–µ–∞–ª—å–Ω—ã–µ –≤–µ–±—Ö—É–∫–∏ –Ω–µ –¥–æ—Ö–æ–¥—è—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** –í–µ–±—Ö—É–∫–∏ –æ—Ç RentProg –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
- 6 –æ—à–∏–±–æ—á–Ω—ã—Ö executions –Ω–∞–π–¥–µ–Ω–æ (ID: 37-42)
- –í—Å–µ –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å —Å –æ—à–∏–±–∫–æ–π
- –í –ë–î 0 –∑–∞–ø–∏—Å–µ–π

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. –ù–µ–≤–µ—Ä–Ω—ã–π URL –≤ RentProg –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
2. –ü—Ä–æ–±–ª–µ–º–∞ —Å Nginx –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ–º
3. PostgreSQL credentials –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Nginx –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
   ```bash
   ssh root@46.224.17.15
   tail -f /var/log/nginx/webhook-access.log
   tail -f /var/log/nginx/webhook-error.log
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ n8n:**
   ```bash
   docker logs n8n --tail 100 | grep -i webhook
   docker logs n8n --tail 100 | grep -i error
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ RentProg:**
   - URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å: `https://webhook.rentflow.rentals/`
   - –ú–µ—Ç–æ–¥: POST
   - Webhook –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–∫—Ç–∏–≤–µ–Ω

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å credentials:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ workflow –≤ n8n UI
   - –ù–æ–¥–∞ "Save Event" ‚Üí Credentials
   - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã–±—Ä–∞–Ω "PostgreSQL"

**–°—Ç–∞—Ç—É—Å:** üîç –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

- [ ] PostgreSQL credentials –Ω–∞–∑–Ω–∞—á–µ–Ω—ã –≤ –Ω–æ–¥–µ "Save Event"
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –¥–µ—Ç–∞–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ execution –≤ n8n UI
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –ª–æ–≥–∏ Nginx –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –ª–æ–≥–∏ n8n –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ RentProg (URL –≤–µ–±—Ö—É–∫–∞)
- [ ] –û—Ç–ø—Ä–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç–æ–≤—ã–π –≤–µ–±—Ö—É–∫ –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∑–∞–ø–∏—Å—å –≤ –ë–î

---

## üîß –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# SSH –Ω–∞ —Å–µ—Ä–≤–µ—Ä
ssh root@46.224.17.15

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Nginx
tail -50 /var/log/nginx/webhook-access.log
tail -50 /var/log/nginx/webhook-error.log

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ n8n
docker logs n8n --tail 100 | grep -i webhook
docker logs n8n --tail 100 | grep -i error
docker logs n8n --tail 100 | grep -i postgres

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å n8n
docker ps | grep n8n

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è n8n
docker exec n8n printenv | grep WEBHOOK
```

---

## ‚úÖ –§–∞–π–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã

- ‚úÖ `n8n-workflows/rentprog-webhooks-monitor.json` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω error handling –∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
- ‚úÖ `n8n-workflows/rentprog-upsert-processor.json` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã connections
- ‚úÖ `n8n-workflows/health-status.json` - –æ–±–Ω–æ–≤–ª–µ–Ω URL
- ‚úÖ Workflow –æ–±–Ω–æ–≤–ª–µ–Ω—ã –≤ n8n —á–µ—Ä–µ–∑ API

---

**–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –≤ –∫–æ–¥–µ. –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ credentials –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.** ‚úÖ
