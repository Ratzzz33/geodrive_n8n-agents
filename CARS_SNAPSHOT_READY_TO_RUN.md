# ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É: RentProg Cars Snapshot

**–î–∞—Ç–∞:** 2025-11-03  
**–°—Ç–∞—Ç—É—Å:** üü¢ –í–°–Å –ü–û–î–ì–û–¢–û–í–õ–ï–ù–û

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

### 1. ‚úÖ Workflow –Ω–∞–π–¥–µ–Ω –≤ n8n
- **ID:** `j7UEBJvTzjhHrzR4`
- **–ù–∞–∑–≤–∞–Ω–∏–µ:** `RentProg Cars Snapshot`
- **–¢–∏–ø:** Manual Trigger (–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é)
- **–°—Ç–∞—Ç—É—Å:** Inactive (–≥–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É)

### 2. ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
- –ü–æ–ª–µ `data` (JSONB) –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ —Ç–∞–±–ª–∏—Ü—É `cars`
- GIN –∏–Ω–¥–µ–∫—Å —Å–æ–∑–¥–∞–Ω –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –†–µ–∑—É–ª—å—Ç–∞—Ç: **–£–°–ü–ï–®–ù–û**

### 3. ‚úÖ –§–∏–ª–∏–∞–ª—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤ –ë–î
–í—Å–µ 4 —Ñ–∏–ª–∏–∞–ª–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç:
- ‚úÖ `tbilisi` - –¢–±–∏–ª–∏—Å–∏
- ‚úÖ `batumi` - –ë–∞—Ç—É–º–∏
- ‚úÖ `kutaisi` - –ö—É—Ç–∞–∏—Å–∏
- ‚úÖ `service-center` - –°–µ—Ä–≤–∏—Å–Ω—ã–π —Ü–µ–Ω—Ç—Ä

### 4. ‚úÖ –¢–æ–∫–µ–Ω—ã —Ñ–∏–ª–∏–∞–ª–æ–≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
–¢–æ–∫–µ–Ω—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ –∫–æ–¥ workflow –∏–∑ –≤–∞—à–∏—Ö —Ñ–∞–π–ª–æ–≤.

---

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ n8n UI (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

1. **–û—Ç–∫—Ä–æ–π—Ç–µ workflow:**
   ```
   https://n8n.rentflow.rentals/workflow/j7UEBJvTzjhHrzR4
   ```

2. **–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "Execute Workflow"**
   - –ù–∞–π–¥–∏—Ç–µ –∫–Ω–æ–ø–∫—É —Å –∏–∫–æ–Ω–∫–æ–π "play" (‚ñ∂Ô∏è) –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
   - –ò–ª–∏ –∫–Ω–æ–ø–∫—É "Test workflow"

3. **–ù–∞–±–ª—é–¥–∞–π—Ç–µ –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º**
   - Workflow –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤—Å–µ 4 —Ñ–∏–ª–∏–∞–ª–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
   - –í –∫–æ–Ω—Å–æ–ª–∏ –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ª–æ–≥–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
   - ‚è±Ô∏è –û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è: **5-15 –º–∏–Ω—É—Ç**

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É

```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
https://n8n.rentflow.rentals/workflow/j7UEBJvTzjhHrzR4
```

–ó–∞—Ç–µ–º –Ω–∞–∂–º–∏—Ç–µ "Execute Workflow" –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.

---

## üìä –ß—Ç–æ –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å

### –ü—Ä–æ—Ü–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:

```
1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∏–ª–∏–∞–ª–æ–≤ (4 —Ñ–∏–ª–∏–∞–ª–∞)
   ‚Üì
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∏–ª–∏–∞–ª–∞:
   ‚îú‚îÄ –ü–æ–ª—É—á–µ–Ω–∏–µ request token
   ‚îú‚îÄ –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü (–ø–æ 20 –º–∞—à–∏–Ω)
   ‚îÇ  ‚Ä¢ –°—Ç—Ä–∞–Ω–∏—Ü–∞ 1, 2, 3... –¥–æ –∫–æ–Ω—Ü–∞
   ‚îÇ  ‚Ä¢ –ó–∞–¥–µ—Ä–∂–∫–∞ 1 —Å–µ–∫ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
   ‚îú‚îÄ –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
   ‚îú‚îÄ Upsert –≤ —Ç–∞–±–ª–∏—Ü—É cars
   ‚îú‚îÄ Upsert –≤ —Ç–∞–±–ª–∏—Ü—É external_refs
   ‚îî‚îÄ –û—Ç—á–µ—Ç –ø–æ —Ñ–∏–ª–∏–∞–ª—É
   ‚Üì
3. –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   üéâ –ò–ú–ü–û–†–¢ –ó–ê–í–ï–†–®–ï–ù
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   üìä –í—Å–µ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Ñ–∏–ª–∏–∞–ª–æ–≤: 4
   üöó –í—Å–µ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π: ~125
   
   –î–µ—Ç–∞–ª–∏ –ø–æ —Ñ–∏–ª–∏–∞–ª–∞–º:
     - tbilisi: ~45 –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
     - batumi: ~32 –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
     - kutaisi: ~28 –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
     - service-center: ~20 –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è workflow:

#### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ executions –≤ n8n UI
```
https://n8n.rentflow.rentals/workflow/j7UEBJvTzjhHrzR4/executions
```

#### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î

```sql
-- –í—Å–µ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
SELECT COUNT(*) as total_cars FROM cars;

-- –ü–æ —Ñ–∏–ª–∏–∞–ª–∞–º
SELECT 
  b.code as branch,
  COUNT(c.id) as cars_count
FROM cars c
LEFT JOIN branches b ON c.branch_id = b.id
GROUP BY b.code
ORDER BY cars_count DESC;

-- –ü—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö
SELECT 
  id,
  plate,
  model,
  data->>'car_name' as rentprog_name,
  data->>'id' as rentprog_id,
  created_at
FROM cars
LIMIT 5;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ external_refs
SELECT 
  er.external_id as rentprog_id,
  er.branch_code,
  c.plate,
  c.model
FROM external_refs er
JOIN cars c ON er.entity_id = c.id
WHERE er.system = 'rentprog' AND er.entity_type = 'car'
LIMIT 5;
```

### –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:

```bash
# –°–æ–∑–¥–∞–º —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
node setup/check_cars_import_results.mjs
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è API:
- **Rate limit:** 60 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É (workflow —Å–æ–±–ª—é–¥–∞–µ—Ç: 1 —Å–µ–∫ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏)
- **–ü–∞–≥–∏–Ω–∞—Ü–∏—è:** 20 –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π –∑–∞ –∑–∞–ø—Ä–æ—Å
- **Timeout:** 15 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∑–∞–ø—Ä–æ—Å

### –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫:
- ‚úÖ Workflow –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ
- ‚úÖ –ë–ª–∞–≥–æ–¥–∞—Ä—è `ON CONFLICT DO UPDATE` –¥—É–±–ª–∏–∫–∞—Ç—ã –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è

### –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ n8n UI
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω—ã —Ñ–∏–ª–∏–∞–ª–æ–≤
- –ü—Ä–∏ 401 Unauthorized - –æ–±–Ω–æ–≤–∏—Ç–µ —Ç–æ–∫–µ–Ω—ã

---

## üí° –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞

### –ï—Å–ª–∏ –≤—Å—ë –ø—Ä–æ—à–ª–æ —É—Å–ø–µ—à–Ω–æ:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –ë–î (SQL –∑–∞–ø—Ä–æ—Å—ã –≤—ã—à–µ)
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–π –Ω–æ–¥–µ workflow
3. –í—Å–µ –º–∞—à–∏–Ω—ã –∏–∑ 4 —Ñ–∏–ª–∏–∞–ª–æ–≤ –±—É–¥—É—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ `cars`
4. –°–≤—è–∑–∏ —Å RentProg –±—É–¥—É—Ç –≤ —Ç–∞–±–ª–∏—Ü–µ `external_refs`

### –ï—Å–ª–∏ –±—ã–ª–∏ –æ—à–∏–±–∫–∏:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ executions –≤ n8n UI
2. –ù–∞–π–¥–∏—Ç–µ –Ω–æ–¥—É —Å –æ—à–∏–±–∫–æ–π
3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏
4. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–æ–≤–∞

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [n8n-workflows/CARS_SNAPSHOT_README.md](./n8n-workflows/CARS_SNAPSHOT_README.md) - –ö—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞
- [docs/RENTPROG_CARS_SNAPSHOT_GUIDE.md](./docs/RENTPROG_CARS_SNAPSHOT_GUIDE.md) - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

---

## üéØ –î–µ–π—Å—Ç–≤–∏–µ

### –ó–ê–ü–£–°–¢–ò–¢–ï WORKFLOW:

```
üëâ https://n8n.rentflow.rentals/workflow/j7UEBJvTzjhHrzR4
```

**–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "Execute Workflow" ‚ñ∂Ô∏è**

---

**–í—Å—ë –≥–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É!** üöÄ  
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~5-15 –º–∏–Ω—É—Ç  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –º–∞—à–∏–Ω—ã –∏–∑ –≤—Å–µ—Ö 4 —Ñ–∏–ª–∏–∞–ª–æ–≤ –±—É–¥—É—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ –ë–î

