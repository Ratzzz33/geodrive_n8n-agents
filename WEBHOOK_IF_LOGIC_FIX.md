# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ If –Ω–æ–¥—ã –≤ RentProg Webhooks Monitor

## –î–∞—Ç–∞: 2025-11-02

## –ü—Ä–æ–±–ª–µ–º–∞
Error Alert —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª –ø—Ä–∏ `ok: true`, —Ö–æ—Ç—è –¥–æ–ª–∂–µ–Ω —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ `ok: false`. –¢–∞–∫–∂–µ –≤ Error Alert –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –∑–Ω–∞—á–µ–Ω–∏—è "unknown" –¥–ª—è branch –∏ type.

## –ü—Ä–∏—á–∏–Ω–∞
1. **Telegram –Ω–æ–¥–∞ –∏–∑–º–µ–Ω—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö** - –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è Telegram –Ω–æ–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–≤–æ–π –æ—Ç–≤–µ—Ç (—Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—Ç Telegram API), –∞ –Ω–µ –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–µ–±—Ö—É–∫–∞.
2. **Debug –Ω–æ–¥–∞ —à–ª–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ** - –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ —á–µ—Ä–µ–∑ Debug –Ω–æ–¥—É –ø–µ—Ä–µ–¥ If –Ω–æ–¥–æ–π, —á—Ç–æ –º–æ–≥–ª–æ –∏–∑–º–µ–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö.
3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ fallback –≤ Error Alert** - –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ fallback –Ω–∞ `body.branch` –∏ `body.reason`.

## –†–µ—à–µ–Ω–∏–µ

### 1. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≤–µ—Ç–∫–∏ –∏–∑ Webhook
Debug –Ω–æ–¥–∞ —Ç–µ–ø–µ—Ä—å –∏–¥–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–æ–π, –Ω–µ –≤–ª–∏—è—è –Ω–∞ –¥–∞–Ω–Ω—ã–µ:
```json
"connections": {
  "Webhook": {
    "main": [[
      { "node": "Debug: Webhook Received", "type": "main", "index": 0 },
      { "node": "If Error", "type": "main", "index": 0 }
    ]]
  },
  "Debug: Webhook Received": {
    "main": [[]]
  }
}
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ If –Ω–æ–¥—ã
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ—à–∏–±–∫—É:
- **–ü—É—Ç—å 0** (Save Event): –µ—Å–ª–∏ `ok !== false` (—Ç.–µ. `ok === true` –∏–ª–∏ `ok === undefined`)
- **–ü—É—Ç—å 1** (Error Alert): –µ—Å–ª–∏ `ok === false`

```json
{
  "leftValue": "={{ $json.body && $json.body.ok }}",
  "rightValue": false,
  "operator": {
    "type": "boolean",
    "operation": "equals"
  }
}
```

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—ã—Ä–∞–∂–µ–Ω–∏—è –≤ Error Alert
–î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ fallback –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:
```json
"text": "=üö® RentProg Webhook Error\n\nBranch: {{ $json.query && $json.query.branch ? $json.query.branch : ($json.body && $json.body.branch ? $json.body.branch : 'unknown') }}\nType: {{ $json.body && $json.body.type ? $json.body.type : ($json.body && $json.body.event ? $json.body.event : 'unknown') }}\nError: {{ $json.body && $json.body.error ? $json.body.error : ($json.body && $json.body.reason ? $json.body.reason : 'Unknown error') }}"
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ workflow –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```
Webhook
‚îú‚îÄ‚îÄ Debug: Webhook Received (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ, –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥–∞–Ω–Ω—ã–µ)
‚îî‚îÄ‚îÄ If Error
    ‚îú‚îÄ‚îÄ [ok !== false] ‚Üí Save Event ‚Üí Respond
    ‚îî‚îÄ‚îÄ [ok === false] ‚Üí Telegram Alert ‚Üí Save Event ‚Üí Respond
```

## –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

### –ü—Ä–∏ `ok: true`
- ‚úÖ Debug —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Telegram
- ‚úÖ –°–æ–±—ã—Ç–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î (–ø—É—Ç—å 0)
- ‚ùå Error Alert –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

### –ü—Ä–∏ `ok: false`
- ‚úÖ Debug —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Telegram
- ‚úÖ Error Alert –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Telegram —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ –°–æ–±—ã—Ç–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î (–ø—É—Ç—å 1)

## –ü—Ä–æ–≤–µ—Ä–∫–∞
1. –û—Ç–ø—Ä–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç–æ–≤—ã–π –≤–µ–±—Ö—É–∫ —Å `ok: true` (execution ID: 50)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Telegram:
   - –î–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ Debug —Å–æ–æ–±—â–µ–Ω–∏–µ
   - –ù–ï –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ Error Alert
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ë–î:
   - –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ `events`
   - –ü–æ–ª–µ `ok` –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `true`

## –°—Ç–∞—Ç—É—Å
‚úÖ Workflow –æ–±–Ω–æ–≤–ª–µ–Ω –≤ n8n
‚úÖ –õ–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω
‚è≥ –û–∂–∏–¥–∞–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç–µ

