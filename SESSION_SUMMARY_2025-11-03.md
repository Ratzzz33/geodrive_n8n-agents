# üìù –ò—Ç–æ–≥–∏ —Å–µ—Å—Å–∏–∏: –°–∏—Å—Ç–µ–º–∞ –æ–±—É—á–µ–Ω–∏—è –≤–µ–±—Ö—É–∫–æ–≤ RentProg

**–î–∞—Ç–∞:** 2025-11-03  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

---

## üéØ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –æ–±—É—á–µ–Ω–∏—è –≤–µ–±—Ö—É–∫–æ–≤

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å–µ —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π –≤ `knownEventTypes`:
  - `booking_update`, `booking_create`, `booking_delete`
  - `car_update`, `car_create`, `car_delete`
  - `client_update`, `client_create`, `client_delete`

- –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (`operation`):
  - `update` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∑–∞–ø–∏—Å–∏
  - `create` - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏
  - `delete` - –∞—Ä—Ö–∏–≤–∞—Ü–∏—è –∑–∞–ø–∏—Å–∏

**–õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
```
UPDATE:
  ‚îú‚îÄ –ó–∞–ø–∏—Å—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç? ‚Üí Quick update –ø–æ–ª–µ–π
  ‚îî‚îÄ –ó–∞–ø–∏—Å—å –ù–ï —Å—É—â–µ—Å—Ç–≤—É–µ—Ç? ‚Üí Full upsert —á–µ—Ä–µ–∑ Upsert Processor

CREATE:
  ‚îî‚îÄ –í—Å–µ–≥–¥–∞ full upsert (–≤—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ payload)

DELETE:
  ‚îî‚îÄ –ê—Ä—Ö–∏–≤–∞—Ü–∏—è (archived = true)
```

---

### 2. ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è: branch ‚Üí company_id

**–ü—Ä–∏—á–∏–Ω–∞:** 
Branch –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–∏—Å—ã–ª–∞–µ—Ç—Å—è –≤ –≤–µ–±—Ö—É–∫–µ. –§–∏–ª–∏–∞–ª –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ `company_id` –≤ –¥–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–∏.

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚ùå –£–¥–∞–ª–µ–Ω–æ: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `branch` –∏–∑ query/body –≤–µ–±—Ö—É–∫–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ `company_id` –∏–∑ `payload.company_id`
- ‚úÖ –°–æ–∑–¥–∞–Ω –º–∞–ø–ø–∏–Ω–≥: `src/config/company-branch-mapping.ts`

**–ú–∞–ø–ø–∏–Ω–≥ –≤—Å–µ—Ö —Ñ–∏–ª–∏–∞–ª–æ–≤:**
```typescript
const COMPANY_ID_TO_BRANCH = {
  9247: 'tbilisi',
  9248: 'kutaisi',
  9506: 'batumi',
  11163: 'service-center'
};
```

**–ú–∏–≥—Ä–∞—Ü–∏—è –ë–î:**
```sql
-- –¢–∞–±–ª–∏—Ü–∞ events
ALTER TABLE events DROP COLUMN branch;
ALTER TABLE events ADD COLUMN company_id INTEGER;
CREATE INDEX idx_events_company_id ON events(company_id);
ALTER TABLE events ADD CONSTRAINT events_company_id_type_rentprog_id_unique 
  UNIQUE (company_id, type, rentprog_id);
```

---

### 3. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω n8n Workflow

**–§–∞–π–ª:** `n8n-workflows/rentprog-webhooks-monitor.json`

**Parse & Validate Format:**
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç `companyId` –∏–∑ `payload.company_id`
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç `operation` (update/create/delete)
- –£–¥–∞–ª–µ–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `branch`

**Auto Process:**
- –ü–µ—Ä–µ–¥–∞–µ—Ç `company_id` –≤–º–µ—Å—Ç–æ `branch`
- –ü–µ—Ä–µ–¥–∞–µ—Ç `operation` –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

**Save Event:**
- SQL –æ–±–Ω–æ–≤–ª–µ–Ω: `company_id` –≤–º–µ—Å—Ç–æ `branch`

**Debug: Unknown Format (Telegram):**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç `Company ID` –≤–º–µ—Å—Ç–æ `Branch`
- HTML formatting —Å `<pre>` —Ç–µ–≥–∞–º–∏ –¥–ª—è payload

---

### 4. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω Jarvis API

**–§–∞–π–ª:** `src/api/index.ts`

**Endpoint `/process-webhook`:**
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç `company_id` –≤–º–µ—Å—Ç–æ `branch`
- –õ–æ–≥–∏–∫–∞ –¥–ª—è `operation`:
  - **DELETE:** –∞—Ä—Ö–∏–≤–∞—Ü–∏—è —á–µ—Ä–µ–∑ `archiveEntity()`
  - **CREATE:** –≤—Å–µ–≥–¥–∞ full upsert
  - **UPDATE:** quick update –ò–õ–ò full upsert

**–ù–æ–≤—ã–π –º–æ–¥—É–ª—å:** `src/db/archive.ts`
- –§—É–Ω–∫—Ü–∏—è `archiveEntity(entityType, entityId)`
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `archived = true`

---

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ RentProg Webhook (company_id –≤ payload)                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ n8n: Parse & Validate Format                            ‚îÇ
‚îÇ   ‚Ä¢ –ü–∞—Ä—Å–∏–Ω–≥ Ruby hash ‚Üí JSON                            ‚îÇ
‚îÇ   ‚Ä¢ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: eventType, entityType, operation       ‚îÇ
‚îÇ   ‚Ä¢ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ: rentprogId, companyId                   ‚îÇ
‚îÇ   ‚Ä¢ isKnownFormat = true/false                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚Üì
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ               ‚îÇ
         [Known]         [Unknown]
              ‚îÇ               ‚îÇ
              ‚Üì               ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ Auto Process    ‚îÇ  ‚îÇ Telegram Alert   ‚îÇ
    ‚îÇ (Jarvis API)    ‚îÇ  ‚îÇ (–¥–ª—è –æ–±—É—á–µ–Ω–∏—è)   ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ operation?                   ‚îÇ
    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
    ‚îÇ UPDATE  ‚îÇ CREATE  ‚îÇ DELETE  ‚îÇ
    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
    ‚îÇ Quick   ‚îÇ Full    ‚îÇ Archive ‚îÇ
    ‚îÇ Update  ‚îÇ Upsert  ‚îÇ         ‚îÇ
    ‚îÇ or      ‚îÇ         ‚îÇ         ‚îÇ
    ‚îÇ Upsert  ‚îÇ         ‚îÇ         ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ/–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### n8n Workflows:
- ‚úÖ `n8n-workflows/rentprog-webhooks-monitor.json`

### Jarvis API:
- ‚úÖ `src/api/index.ts` - `/process-webhook` endpoint
- ‚úÖ `src/config/company-branch-mapping.ts` (—Å–æ–∑–¥–∞–Ω)
- ‚úÖ `src/db/archive.ts` (—Å–æ–∑–¥–∞–Ω)

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- ‚úÖ `setup/migrate_branch_to_company_id.mjs` (–≤—ã–ø–æ–ª–Ω–µ–Ω–∞)
- ‚úÖ `setup/migrate_add_rentprog_id.mjs` (–∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å–µ—Å—Å–∏–∏)

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- ‚úÖ `WEBHOOK_LEARNING_SYSTEM_COMPLETE.md`
- ‚úÖ `BRANCH_TO_COMPANY_ID_MIGRATION.md`
- ‚úÖ `SESSION_SUMMARY_2025-11-03.md` (—ç—Ç–æ—Ç —Ñ–∞–π–ª)

### –°–∫—Ä–∏–ø—Ç—ã:
- ‚úÖ `setup/update_workflow_no_branch.mjs`
- ‚úÖ `setup/parse_code_updated.js`
- ‚úÖ `setup/parse_code_no_branch.js`
- ‚úÖ `setup/send_booking_update_test.mjs`

---

## üö® –í–∞–∂–Ω–æ –¥–ª—è –∑–∞–ø—É—Å–∫–∞

### Jarvis API –Ω–µ –∑–∞–ø—É—â–µ–Ω!

**–¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –≤—ã–∑–æ–≤–µ `http://46.224.17.15:3000` ‚Üí 504 Gateway Timeout

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ Hetzner (46.224.17.15):
cd /root/geodrive_n8n-agents
npm run build
npm start

# –ò–ª–∏ —á–µ—Ä–µ–∑ PM2:
pm2 start dist/index.js --name jarvis
pm2 save
```

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å

1. **‚úÖ –í–µ–±—Ö—É–∫–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ n8n**
   - URL: `https://webhook.rentflow.rentals`
   - Nginx –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –Ω–∞ n8n

2. **‚úÖ Parse & Validate Format**
   - –ü–∞—Ä—Å–∏–Ω–≥ Ruby hash ‚Üí JSON
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Å–æ–±—ã—Ç–∏—è –∏ –æ–ø–µ—Ä–∞—Ü–∏–∏
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ `company_id`

3. **‚úÖ If Known Format**
   - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ/–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
   - –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ ‚Üí Telegram alert

4. **‚úÖ Save Event ‚Üí –ë–î**
   - –¢–∞–±–ª–∏—Ü–∞ `events` —Å `company_id`
   - –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ UNIQUE constraint

5. **‚úÖ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**
   - –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –ø—Ä–∏—Ö–æ–¥—è—Ç —Å –ø–æ–ª–Ω—ã–º payload
   - HTML formatting –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å Jarvis API** –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –≤–µ–±—Ö—É–∫–∞–º–∏:
   - booking_update
   - booking_create
   - booking_delete
   - car_update
   - client_update
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å** –º–∞–ø–ø–∏–Ω–≥ `company_id` ‚Üí `branch` –¥–ª—è –≤—Å–µ—Ö —Ñ–∏–ª–∏–∞–ª–æ–≤
4. **–û–±—É—á–∏—Ç—å** —Å–∏—Å—Ç–µ–º—É —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –ø–æ –º–µ—Ä–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è

---

## üí° –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è

1. **–î–æ–±–∞–≤–∏—Ç—å –≤ knownEventTypes:**
   ```javascript
   const knownEventTypes = [
     ...existing,
     'new_event_type'  // –¥–æ–±–∞–≤–∏—Ç—å
   ];
   ```

2. **–û–±–Ω–æ–≤–∏—Ç—å workflow:**
   ```bash
   node setup/update_parse_code.mjs
   node setup/fix_and_update.mjs
   ```

3. **–¢–µ—Å—Ç:**
   ```bash
   node setup/send_test_webhook.mjs
   ```

---

## üéì –û–±—É—á–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –≤–µ–±—Ö—É–∫ –ø—Ä–∏—Ö–æ–¥–∏—Ç ‚Üí Telegram alert
2. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É payload
3. –î–æ–±–∞–≤–ª—è–µ–º —Ç–∏–ø –≤ `knownEventTypes`
4. –û–±–Ω–æ–≤–ª—è–µ–º workflow
5. –°–ª–µ–¥—É—é—â–∏–π –≤–µ–±—Ö—É–∫ —ç—Ç–æ–≥–æ —Ç–∏–ø–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ü—Ä–∏–º–µ—Ä Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
```
–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤–µ–±—Ö—É–∫–∞ –æ—Ç RentProg

–¢–∏–ø —Å–æ–±—ã—Ç–∏—è: new_event_type
RentProg ID: 12345
Company ID: 9247

–û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:
–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è: new_event_type

Payload (Ruby hash):
{"field"=>"value", "id"=>12345}

Parsed payload (JSON):
{
  "field": "value",
  "id": 12345
}
```

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **n8n UI:** https://n8n.rentflow.rentals
- **Workflow:** https://n8n.rentflow.rentals/workflow/gNXRKIQpNubEazH7
- **Jarvis API:** `http://46.224.17.15:3000` (–Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å)
- **Neon PostgreSQL:** —Ç–∞–±–ª–∏—Ü–∞ `events`

---

**–ê–≤—Ç–æ—Ä:** Claude Sonnet 4.5  
**–î–∞—Ç–∞:** 2025-11-03  
**–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:** ~4 —á–∞—Å–∞  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É Jarvis API –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

