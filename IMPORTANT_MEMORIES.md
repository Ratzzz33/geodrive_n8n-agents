# ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–¢–ö–ò –î–õ–Ø –ê–ì–ï–ù–¢–ê

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-11

---

## üî¥ –ö–†–ò–¢–ò–ß–ù–û: –ò–º–ø–æ—Ä—Ç n8n workflow (2025)

### –ü—Ä–æ–±–ª–µ–º–∞
–û—à–∏–±–∫–∏ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ workflow –≤ n8n:
- "Could not find workflow"
- "Could not find property option"

### –ü—Ä–∏—á–∏–Ω–∞
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ API n8n –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –≤ 2025 –≥–æ–¥—É. –°—Ç–∞—Ä—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –∏–º–ø–æ—Ä—Ç–∞ –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç –Ω–æ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è.

### ‚úÖ –†–µ—à–µ–Ω–∏–µ
**–í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:** `setup/import_workflow_2025.mjs`

**–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è 2025:**
1. **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:** `name`, `nodes`, `connections`, `settings`
2. **–ó–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ –ø–æ–ª—è:** `id`, `versionId`, `updatedAt`, `createdAt`, `meta`, `staticData`, `pinData`, `tags`
3. **Credentials:** –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ `{ id: "..." }` –∏–ª–∏ `{ name: "..." }`
4. **Options:** –ø—É—Å—Ç—ã–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –≤ `parameters.options` –≤—ã–∑—ã–≤–∞—é—Ç –æ—à–∏–±–∫–∏
5. **webhookId:** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∏–ª–∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
6. **‚ö†Ô∏è errorWorkflow:** –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ settings ‚Äî —ç—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (–≤—ã–∑—ã–≤–∞–ª–∞ –æ—à–∏–±–∫–∏ "Could not find workflow")

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –Ω–æ–¥ (2025):**

7. **Schedule Trigger (typeVersion 1.2):**
   - ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: `hours: { start: 8, end: 23 }` —Å `hoursInterval`
   - ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: `cronExpression: "0 8-23 * * *"` (–∫–∞–∂–¥—ã–π —á–∞—Å —Å 8 –¥–æ 23)
   - –§–æ—Ä–º–∞—Ç: `"rule": { "interval": [{ "field": "cronExpression", "expression": "0 8-23 * * *" }] }`

8. **HTTP Request (typeVersion 4.2):**
   - ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: `options.response.response.responseFormat` (–≤–ª–æ–∂–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
   - ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: —Ç–æ–ª—å–∫–æ `options.timeout` –∏–ª–∏ —É–±—Ä–∞—Ç—å `response` –ø–æ–ª–Ω–æ—Å—Ç—å—é
   - –§–æ—Ä–º–∞—Ç: `"options": { "timeout": 3600000 }`

9. **IF –Ω–æ–¥–∞ (typeVersion 2):**
   - ‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–æ–±–∞–≤–ª—è—Ç—å `id` –∫ –∫–∞–∂–¥–æ–º—É —É—Å–ª–æ–≤–∏—é –≤ –º–∞—Å—Å–∏–≤–µ `conditions`
   - –§–æ—Ä–º–∞—Ç: `"conditions": [{ "id": "check-errors", "leftValue": "...", ... }]`
   - –ë–µ–∑ `id` –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞: "propertyValues[itemName] is not iterable"

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
node setup/import_workflow_2025.mjs n8n-workflows/your-workflow.json
```

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [N8N_IMPORT_2025_FIX.md](./N8N_IMPORT_2025_FIX.md)

---

## üìä –ò–º–ø–æ—Ä—Ç i2crm –¥–∞–Ω–Ω—ã—Ö

### –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
- **–ò–º–ø–æ—Ä—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è** —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º —Å–∫—Ä–∏–ø—Ç–æ–º (–±–µ–∑ –Ω–æ–≤—ã—Ö –¥—É–±–ª–∏–∫–∞—Ç–æ–≤)
- **Telegram:** ~71,543 ‚úÖ (–∑–∞–≤–µ—Ä—à–µ–Ω, 99.96% –æ—Ç Excel)
- **WhatsApp:** ~196,840+ ‚è≥ (–∏–¥–µ—Ç –∏–º–ø–æ—Ä—Ç, –æ—Å—Ç–∞–ª–æ—Å—å ~227k)
- **–í—Å–µ–≥–æ –≤ –ë–î:** ~487k+ (–≤–∫–ª—é—á–∞—è —Å—Ç–∞—Ä—ã–µ –¥—É–±–ª–∏–∫–∞—Ç—ã)

### –ü—Ä–æ–±–ª–µ–º–∞ —Å –¥—É–±–ª–∏–∫–∞—Ç–∞–º–∏
- **–í –ë–î 44.7% –¥—É–±–ª–∏–∫–∞—Ç–æ–≤** (218,685 –∏–∑ 487,068)
- **–ü—Ä–∏—á–∏–Ω–∞:** –°—Ç–∞—Ä—ã–π —Å–∫—Ä–∏–ø—Ç –Ω–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–ª –¥—É–±–ª–∏–∫–∞—Ç—ã –≤–Ω—É—Ç—Ä–∏ Excel —Ñ–∞–π–ª–æ–≤
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –î–æ–±–∞–≤–ª–µ–Ω `drop_duplicates()` –≤ `setup/import_i2crm_hash.py`

### –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–º–ø–æ—Ä—Ç–∞
–£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –¥—É–±–ª–∏–∫–∞—Ç—ã:
```bash
python setup/run_remove_dups.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** ~495,432 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

---

## üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### External Refs Pattern
**–ö–†–ò–¢–ò–ß–ù–û:** –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `rp_*` –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω—ã–µ.

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
- –ù–∞—à–∏ UUID –∫–∞–∫ –ø–µ—Ä–≤–∏—á–Ω—ã–µ –∫–ª—é—á–∏: `cars`, `clients`, `bookings`
- –í–Ω–µ—à–Ω–∏–µ —Å—Å—ã–ª–∫–∏ —á–µ—Ä–µ–∑ `external_refs`: `system='rentprog'|'amocrm'|'umnico'`, `external_id`

### RentProg –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **Base URL:** `https://rentprog.net/api/v1/public` (–ù–ï api.rentprog.example!)
- **4 —Ñ–∏–ª–∏–∞–ª–∞:** `tbilisi`, `batumi`, `kutaisi`, `service-center`
- **–í–µ–±—Ö—É–∫:** –ï–¥–∏–Ω—ã–π –∞–¥—Ä–µ—Å `https://webhook.rentflow.rentals/` –¥–ª—è –≤—Å–µ—Ö —Ñ–∏–ª–∏–∞–ª–æ–≤

### n8n Workflows
**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ workflow:**
1. RentProg Webhooks Monitor
2. RentProg Upsert Processor
3. Health & Status
4. Sync Progress

**–ò–º–ø–æ—Ä—Ç:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `setup/import_workflow_2025.mjs` (–ù–ï —Å—Ç–∞—Ä—ã–µ —Å–∫—Ä–∏–ø—Ç—ã!)

---

## üîß –†–∞–±–æ—Ç–∞ —Å –ø—É—Ç—è–º–∏

**–ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ:** –í–°–ï–ì–î–ê –∑–∞–ø—É—Å–∫–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞!

```bash
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
cd C:\Users\33pok\geodrive_n8n-agents
python deploy_fixes_now.py

# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
cd setup
python deploy_fixes_now.py  # –î–≤–æ–π–Ω–æ–π –ø—É—Ç—å!
```

---

## üåê –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞

**–î–æ–º–µ–Ω—ã:**
- n8n UI: `https://n8n.rentflow.rentals`
- –í–µ–±—Ö—É–∫–∏: `https://webhook.rentflow.rentals`
- Jarvis API: `http://46.224.17.15:3000`

**–°–µ—Ä–≤–µ—Ä Hetzner:**
- IP: `46.224.17.15`
- User: `root`
- SSH: `python setup/server_ssh.py "–∫–æ–º–∞–Ω–¥–∞"`

**–ë–î Neon PostgreSQL:**
- Connection string –≤ `claude.md` (—Å–µ–∫—Ü–∏—è "–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö")

---

## ü§ñ AI Agent –Ω–æ–¥—ã –≤ n8n (2025)

### –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–í—Å–µ AI Agent —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ Tools Agent** (—Å –≤–µ—Ä—Å–∏–∏ 1.82.0):
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –∞–≥–µ–Ω—Ç–∞ —É–¥–∞–ª–µ–Ω–∞
- –í—Å–µ –∞–≥–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ Tools Agent
- –°—Ç–∞—Ä—ã–µ workflows (–µ—Å–ª–∏ –±—ã–ª–∏ Tools Agent) –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **–ú–∏–Ω–∏–º—É–º –æ–¥–∏–Ω tool –ø–æ–¥–∫–ª—é—á–µ–Ω** —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç `ai_tool`
   - –ë–µ–∑ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ AI Agent –ù–ï –ó–ê–ü–£–°–¢–ò–¢–°–Ø
   - –ü–æ–¥–∫–ª—é—á–∞–π —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç `ai_tool`, –Ω–µ `main`!

2. **Chat Trigger –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
   - `responseMode = "Using Response Nodes"` (–Ω–µ `"lastNode"`)
   - –ò—Å–ø–æ–ª—å–∑—É–π `Respond to Chat` –¥–ª—è –æ—Ç–≤–µ—Ç–∞

3. **Memory:**
   - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π `sessionKey` –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ —Å–µ—Å—Å–∏–π
   - `maxTokensFromMemory` –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

4. **Output Parser:**
   - –ò—Å–ø–æ–ª—å–∑—É–π Structured Output Parser
   - Auto-fixing Output Parser deprecated

### –ë–∞–∑–æ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

- **–ß–∞—Ç:** `Chat Trigger ‚Üí AI Agent ‚Üí Respond to Chat`
- **HTTP API:** `Webhook ‚Üí AI Agent ‚Üí Respond to Webhook`
- **–ü–æ–¥-–∞–≥–µ–Ω—Ç—ã:** `AI Agent ‚Üí AI Agent Tool ‚Üí tools`

**–ü–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞:** [.cursorrules-ai-agents](./.cursorrules-ai-agents)

---

## üìö –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏

- **[.cursorrules](./.cursorrules)** - ‚ö†Ô∏è –ü–†–ê–í–ò–õ–ê –¥–ª—è –∞–≥–µ–Ω—Ç–∞ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å n8n (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ö –ü–†–û–ß–¢–ï–ù–ò–Æ!)
- **[.cursorrules-ai-agents](./.cursorrules-ai-agents)** - ‚ö†Ô∏è –ü–†–ê–í–ò–õ–ê –¥–ª—è AI Agent –Ω–æ–¥ (2025)
- [N8N_IMPORT_2025_FIX.md](./N8N_IMPORT_2025_FIX.md) - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–∞ n8n workflow
- [claude.md](./claude.md) - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –∞–≥–µ–Ω—Ç–∞
- [CURRENT_STATUS.md](./CURRENT_STATUS.md) - –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –∏–º–ø–æ—Ä—Ç–∞ i2crm

---

**–í–∞–∂–Ω–æ:** –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å n8n workflow –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `setup/import_workflow_2025.mjs` –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ä—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤!

