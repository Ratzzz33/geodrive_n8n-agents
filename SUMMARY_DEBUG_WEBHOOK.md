# –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç: Debug —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ

**–î–∞—Ç–∞:** 2025-11-02 21:59  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

---

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

1. **–î–æ–±–∞–≤–ª–µ–Ω–∞ Debug –Ω–æ–¥–∞ Telegram** —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ Webhook
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø–æ–ª—É—á–µ–Ω–∏–∏ –≤–µ–±—Ö—É–∫–∞
   - –°–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—ã–π JSON –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

2. **Workflow –æ–±–Ω–æ–≤–ª–µ–Ω –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω** ‚úÖ
   - Debug –Ω–æ–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ connections
   - Production URL –Ω–∞—Å—Ç—Ä–æ–µ–Ω: `https://webhook.rentflow.rentals`
   - Workflow –∞–∫—Ç–∏–≤–µ–Ω

3. **–¢–µ—Å—Ç–æ–≤—ã–π –≤–µ–±—Ö—É–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω**
   - Execution ID: 47
   - –°—Ç–∞—Ç—É—Å: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω (success)
   - HTTP –æ—Ç–≤–µ—Ç: 200 OK

---

## üìã –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ–π—á–∞—Å

### 1. Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Telegram —á–∞—Ç (–∫—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è `TELEGRAM_ALERT_CHAT_ID`):
- –î–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ "üîî DEBUG: Webhook –ø–æ–ª—É—á–µ–Ω –æ—Ç RentProg"
- –ï—Å–ª–∏ –ø—Ä–∏—à–ª–æ ‚Üí –≤–µ–±—Ö—É–∫ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ n8n ‚úÖ
- –ï—Å–ª–∏ –ù–ï –ø—Ä–∏—à–ª–æ ‚Üí –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
  - –ü–µ—Ä–µ–º–µ–Ω–Ω—É—é `TELEGRAM_ALERT_CHAT_ID` –≤ n8n Settings
  - Telegram credentials –≤ –Ω–æ–¥–µ "Debug: Webhook Received"

### 2. –ó–∞–ø–∏—Å—å –≤ –ë–î

–ü—Ä–æ–±–ª–µ–º–∞: Execution —É—Å–ø–µ—à–µ–Ω, –Ω–æ –∑–∞–ø–∏—Å–∏ –≤ –ë–î –Ω–µ—Ç.

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- –û—à–∏–±–∫–∞ –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏–∏ queryParameters (–ø–æ–¥–∞–≤–ª–µ–Ω–∞ onError)
- –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ –ë–î

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ execution 47 –≤ n8n UI
2. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–¥—É "Save Event"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - –ï—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏ –≤ Output?
   - –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –Ω–æ–¥—ã?
   - –í—ã–ø–æ–ª–Ω–∏–ª—Å—è –ª–∏ SQL –∑–∞–ø—Ä–æ—Å?

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤–µ–±—Ö—É–∫–æ–≤ –æ—Ç RentProg

–ï—Å–ª–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –≤–µ–±—Ö—É–∫–∏ –æ—Ç RentProg –Ω–µ –¥–æ—Ö–æ–¥—è—Ç:

### –ü—Ä–æ–≤–µ—Ä–∫–∞ URL –≤ RentProg

**–î–æ–ª–∂–µ–Ω –±—ã—Ç—å:**
```
https://webhook.rentflow.rentals
```

**–ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
- ‚ùå `https://webhook.rentflow.rentals/` (—Å–æ —Å–ª—ç—à–µ–º)
- ‚ùå `https://webhook.rentflow.rentals/webhook/rentprog-webhook` (—Å –ø—É—Ç–µ–º)
- ‚ùå –°—Ç–∞—Ä—ã–π URL —á–µ—Ä–µ–∑ Netlify

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```bash
# SSH –Ω–∞ —Å–µ—Ä–≤–µ—Ä
ssh root@46.224.17.15

# –õ–æ–≥–∏ Nginx - –¥–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å POST –∑–∞–ø—Ä–æ—Å—ã
tail -f /var/log/nginx/webhook-access.log

# –õ–æ–≥–∏ n8n - –¥–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –≤–µ–±—Ö—É–∫–æ–≤
docker logs n8n --tail 100 | grep -i webhook
```

---

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å workflow

- **Workflow:** –ê–∫—Ç–∏–≤–µ–Ω ‚úÖ
- **Debug –Ω–æ–¥–∞:** –î–æ–±–∞–≤–ª–µ–Ω–∞ ‚úÖ
- **Credentials:** –ù–∞–∑–Ω–∞—á–µ–Ω—ã ‚úÖ
- **–¢–µ—Å—Ç–æ–≤—ã–π –≤–µ–±—Ö—É–∫:** –û–±—Ä–∞–±–æ—Ç–∞–Ω (execution 47) ‚úÖ
- **–ó–∞–ø–∏—Å—å –≤ –ë–î:** ‚ùå –ù–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏)

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Telegram - –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ execution 47 –≤ n8n UI - –¥–µ—Ç–∞–ª–∏ –Ω–æ–¥—ã "Save Event"
3. ‚úÖ –ï—Å–ª–∏ –∑–∞–ø–∏—Å–∏ –≤ –ë–î –Ω–µ—Ç - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—à–∏–±–∫–∏ –≤ execution
4. ‚úÖ –ü–æ—Å–ª–µ –æ—Ç–ª–∞–¥–∫–∏ –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å Debug –Ω–æ–¥—É

---

**–í—Å–µ –≥–æ—Ç–æ–≤–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –≤–µ–±—Ö—É–∫–æ–≤!** üöÄ
