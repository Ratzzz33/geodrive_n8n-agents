# ‚úÖ –°–≤–æ–¥–∫–∞: –û—á–∏—Å—Ç–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ geodrive-n8n –∑–∞–≤–µ—Ä—à–µ–Ω–∞

**–î–∞—Ç–∞:** 8 –Ω–æ—è–±—Ä—è 2025, 19:52 UTC  
**–°–µ—Ä–≤–µ—Ä:** geodrive-n8n (46.224.17.15)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ë–ï–ó–û–ü–ê–°–ï–ù

---

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. ‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã —É–≥—Ä–æ–∑—ã

- **–ú–∞–π–Ω–µ—Ä systemd-bench** - 297% CPU, —Ä–∞–±–æ—Ç–∞–ª 145 –¥–Ω–µ–π
- **SSH –∫–ª—é—á –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫–∞** - sanya221b@gmail.com
- **–í—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–µ —Ñ–∞–π–ª—ã** - /.system/, /root/.system-cache/
- **Cron job** - –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –º–∞–π–Ω–µ—Ä–∞ –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç

### 2. ‚úÖ –£–≥—Ä–æ–∑—ã —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã

```
‚úÖ –ú–∞–π–Ω–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (PID 400096)
‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã –º–∞–π–Ω–µ—Ä–∞ —É–¥–∞–ª–µ–Ω—ã
‚úÖ SSH –∫–ª—é—á —É–¥–∞–ª–µ–Ω
‚úÖ Cron job —É–¥–∞–ª–µ–Ω
‚úÖ fail2ban —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω
‚úÖ Firewall (UFW) –∞–∫—Ç–∏–≤–µ–Ω
```

### 3. ‚úÖ –°–∏—Å—Ç–µ–º–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞

**–î–æ –æ—á–∏—Å—Ç–∫–∏:**
- Load average: **3.01** (–∫—Ä–∏—Ç–∏—á–Ω–æ)
- CPU: 297% (–º–∞–π–Ω–µ—Ä)
- –í—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–π SSH –¥–æ—Å—Ç—É–ø

**–ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏:**
- Load average: **2.56** ‚Üí —Å–Ω–∏–∂–∞–µ—Ç—Å—è –∫ –Ω–æ—Ä–º–µ (0.5-0.8)
- CPU: –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π
- SSH: –æ—á–∏—â–µ–Ω, —Ç–æ–ª—å–∫–æ –ø–∞—Ä–æ–ª—å

### 4. ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

**–°–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã:**
- `SECURITY_INCIDENT_REPORT_geodrive-n8n_2025-11-08.md` - –ø–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç
- `QUICK_ACCESS.md` - –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É
- `setup/security_check.py` - —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- `setup/cleanup_malware.py` - —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∏
- `setup/server_ssh.py` - –æ–±–Ω–æ–≤–ª–µ–Ω –ø–∞—Ä–æ–ª—å (WNHeg7U7aiKw)

---

## üîê –ù–æ–≤—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### –°–µ—Ä–≤–µ—Ä geodrive-n8n

```
IP:       46.224.17.15
User:     root
Password: WNHeg7U7aiKw
```

### –ë—ã—Å—Ç—Ä–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```bash
ssh root@46.224.17.15
# –∏–ª–∏
python setup/server_ssh.py "docker ps"
```

---

## ‚ö†Ô∏è –°–†–û–ß–ù–û –¢–†–ï–ë–£–ï–¢–°–Ø

### 1. Hetzner –∞–∫–∫–∞—É–Ω—Ç

- [ ] –í–æ–π—Ç–∏ –≤ https://console.hetzner.cloud/
- [ ] –°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å –∞–∫–∫–∞—É–Ω—Ç–∞
- [ ] –í–∫–ª—é—á–∏—Ç—å 2FA
- [ ] –£–¥–∞–ª–∏—Ç—å –≤—Å–µ API —Ç–æ–∫–µ–Ω—ã
- [ ] –£–¥–∞–ª–∏—Ç—å SSH –∫–ª—é—á "sanya-key"
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å billing –Ω–∞ –Ω–æ–≤—ã–µ —Å–µ—Ä–≤–µ—Ä—ã

### 2. –†–æ—Ç–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤

- [ ] **OpenAI API** –∫–ª—é—á–∏
- [ ] **Telegram Bot Token** (@n8n_alert_geodrive_bot)
- [ ] **Neon PostgreSQL** –ø–∞—Ä–æ–ª—å
- [ ] **n8n API** –∫–ª—é—á
- [ ] **RentProg API** —Ç–æ–∫–µ–Ω—ã (4 —Ñ–∏–ª–∏–∞–ª–∞)

### 3. GitHub

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–∞ —É—Ç–µ—á–∫—É .env
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Actions Secrets
- [ ] –†–æ—Ç–∞—Ü–∏—è Deploy Keys

---

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ

```
n8n:              Up 39 hours (v1.117.3)
Playwright:       Running (PID 356708)
HTTP Scraper:     Running (PID 369477)
fail2ban:         Active
UFW firewall:     Active
```

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è

```
Jarvis API:       –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –ø–æ—Ä—Ç 3000 –Ω–µ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–µ—Ç—Å—è
                  –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
```

**–ö–∞–∫ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å:**
```bash
python setup/server_ssh.py "cd /root/geodrive_n8n-agents && pm2 restart jarvis-api"
# –∏–ª–∏
python setup/server_ssh.py "systemctl restart jarvis-api"
```

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (—Å–ª–µ–¥—É—é—â–∏–µ 24 —á–∞—Å–∞)

**–ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞–∂–¥—ã–µ 2 —á–∞—Å–∞:**

### 1. Load Average (–¥–æ–ª–∂–µ–Ω —Å–Ω–∏–∑–∏—Ç—å—Å—è)
```bash
python setup/server_ssh.py "uptime"
# –¶–µ–ª—å: < 1.0 (—Å–µ–π—á–∞—Å 2.56)
```

### 2. –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
```bash
$env:PYTHONIOENCODING="utf-8"
python setup/security_check.py
```

### 3. SSH –∞—Ç–∞–∫–∏
```bash
python setup/server_ssh.py "fail2ban-client status sshd"
```

---

## üõ†Ô∏è –°–æ–∑–¥–∞–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```bash
$env:PYTHONIOENCODING="utf-8"
python setup/security_check.py
```

**–ü—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- –ü—Ä–æ—Ü–µ—Å—Å—ã –º–∞–π–Ω–µ—Ä–æ–≤
- SSH –∫–ª—é—á–∏
- –í—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–µ —Ñ–∞–π–ª—ã
- Cron jobs
- Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- Firewall
- –°–µ—Ç–µ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∏

```bash
python setup/cleanup_malware.py
```

**–í—ã–ø–æ–ª–Ω—è–µ—Ç:**
- –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –º–∞–π–Ω–µ—Ä
- –£–¥–∞–ª—è–µ—Ç —Ñ–∞–π–ª—ã
- –£–¥–∞–ª—è–µ—Ç cron jobs
- –£–¥–∞–ª—è–µ—Ç SSH –∫–ª—é—á–∏
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç fail2ban

---

## üìã Checklist –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (—Å–µ–≥–æ–¥–Ω—è)

- [x] ‚úÖ –£–¥–∞–ª–∏—Ç—å –º–∞–π–Ω–µ—Ä —Å —Å–µ—Ä–≤–µ—Ä–∞ geodrive-n8n
- [x] ‚úÖ –°–º–µ–Ω–∏—Ç—å root –ø–∞—Ä–æ–ª—å
- [x] ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å fail2ban
- [ ] ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Hetzner –∞–∫–∫–∞—É–Ω—Ç
- [ ] ‚è≥ –£–¥–∞–ª–∏—Ç—å API —Ç–æ–∫–µ–Ω—ã Hetzner
- [ ] ‚è≥ –í–∫–ª—é—á–∏—Ç—å 2FA –Ω–∞ Hetzner
- [ ] ‚è≥ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Jarvis API

### –í —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏

- [ ] –†–æ—Ç–∞—Ü–∏—è –≤—Å–µ—Ö API –∫–ª—é—á–µ–π
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ GitHub –Ω–∞ —É—Ç–µ—á–∫–∏
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ CPU/load
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤
- [ ] –û—Ç–∫–ª—é—á–µ–Ω–∏–µ SSH –ø–æ –ø–∞—Ä–æ–ª—é (—Ç–æ–ª—å–∫–æ –∫–ª—é—á–∏)

### –î—Ä—É–≥–∏–µ —Å–µ—Ä–≤–µ—Ä—ã

–ò–∑ –≤–∞—à–µ–≥–æ –æ—Ç—á–µ—Ç–∞ –≤–∏–¥–Ω–æ, —á—Ç–æ –µ—Å—Ç—å –µ—â–µ 2 —Å–µ—Ä–≤–µ—Ä–∞:

- **gd-staff-bot (46.224.4.72)** - —É–∂–µ –æ—á–∏—â–µ–Ω ‚úÖ
- **geodrive-booking-service (142.132.180.84)** - –≤—ã–∫–ª—é—á–µ–Ω ‚ö†Ô∏è

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å booking-service —Ç–∞–∫ –∂–µ, –∫–∞–∫ geodrive-n8n.

---

## üìû –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã

- **Hetzner:** https://console.hetzner.cloud/
- **n8n:** https://n8n.rentflow.rentals
- **Neon DB:** https://console.neon.tech/
- **–û—Ç—á–µ—Ç:** `SECURITY_INCIDENT_REPORT_geodrive-n8n_2025-11-08.md`

---

## ‚úÖ –ò—Ç–æ–≥

**–°–µ—Ä–≤–µ—Ä geodrive-n8n –ë–ï–ó–û–ü–ê–°–ï–ù.**

–í—Å–µ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —É–¥–∞–ª–µ–Ω—ã, –∑–∞—â–∏—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞.  
–¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–æ—Ç–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ Hetzner –∏ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö.

**–°–ª–µ–¥—É—é—â–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:** —á–µ—Ä–µ–∑ 2 —á–∞—Å–∞ (21:52 UTC)

---

*–û—Ç—á–µ—Ç —Å–æ—Å—Ç–∞–≤–ª–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏*  
*–î–∞—Ç–∞: 8 –Ω–æ—è–±—Ä—è 2025, 19:52 UTC*

