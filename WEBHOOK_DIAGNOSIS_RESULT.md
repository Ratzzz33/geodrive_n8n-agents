# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –≤–µ–±—Ö—É–∫–æ–≤

**–î–∞—Ç–∞:** 2025-11-02  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –Ω–µ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **HTTPS –Ω–∞—Å—Ç—Ä–æ–µ–Ω** - —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –¥–æ 31.01.2026
2. **Nginx –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç** - –∑–∞–ø—Ä–æ—Å—ã –¥–æ—Ö–æ–¥—è—Ç –¥–æ n8n
3. **–í–µ–±—Ö—É–∫–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç** - –Ω–∞–π–¥–µ–Ω–æ 40 –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç RentProg (IP: 31.135.239.181)
4. **n8n –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç** - 13 —É—Å–ø–µ—à–Ω—ã—Ö executions
5. **–ë–î –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç** - –∑–∞–ø–∏—Å–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

---

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞

–í –ë–î **—Ç–æ–ª—å–∫–æ —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏**:
- `diagnostic_test`
- `test`
- `test_direct`

**–ù–µ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π** –æ—Ç RentProg:
- `booking.issue.planned`
- `booking.returned`
- `car.moved`
- –∏ —Ç.–¥.

---

## üîç –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤

### –õ–æ–≥–∏ Nginx
- **40 –∑–∞–ø—Ä–æ—Å–æ–≤** –æ—Ç RentProg (IP: 31.135.239.181)
- POST –∑–∞–ø—Ä–æ—Å—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç **200 OK** ‚úÖ
- HEAD –∑–∞–ø—Ä–æ—Å—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç **404** (–Ω–æ—Ä–º–∞–ª—å–Ω–æ, webhook –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç HEAD)

### Executions –≤ n8n
- **13 —É—Å–ø–µ—à–Ω—ã—Ö** executions
- **7 –æ—à–∏–±–æ–∫** (—Å—Ç–∞—Ä—ã–µ, –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
- **7 –∑–∞–≤–∏—Å—à–∏—Ö** executions (—Å—Ç–∞—Ä—ã–µ)

### –¢–∞–±–ª–∏—Ü–∞ events –≤ –ë–î
- –í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π: **5**
- –í—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ, –Ω–µ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –æ—Ç RentProg

---

## ü§î –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã

### 1. RentProg –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
1. –í–æ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω–∫—É RentProg
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **Webhooks** (–∏–ª–∏ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - ‚úÖ –í–µ–±—Ö—É–∫–∏ **–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∏–ª–∏–∞–ª–∞?
   - ‚úÖ –í—ã–±—Ä–∞–Ω—ã **—Å–æ–±—ã—Ç–∏—è** –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏? (booking.issue, booking.return, car.moved –∏ —Ç.–¥.)
   - ‚úÖ URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π? (`https://webhook.rentflow.rentals`)

### 2. –°–æ–±—ã—Ç–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç, –Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ `ON CONFLICT DO NOTHING`

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ï—Å–ª–∏ —Å–æ–±—ã—Ç–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ `(branch, type, ext_id)`, –æ–Ω–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–µ–π

### 3. –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** RentProg –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –¥—Ä—É–≥–æ–º —Ñ–æ—Ä–º–∞—Ç–µ

**–†–µ—à–µ–Ω–∏–µ:** Debug –Ω–æ–¥–∞ —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞ - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ Telegram, —Ç–∞–º –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–æ–≤

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ RentProg

1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤–µ–±—Ö—É–∫–∏ **–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã** –¥–ª—è –≤—Å–µ—Ö —Ñ–∏–ª–∏–∞–ª–æ–≤
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—ã–±—Ä–∞–Ω—ã **—Å–æ–±—ã—Ç–∏—è** –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏:
   - `booking.created`
   - `booking.issue.planned`
   - `booking.issued`
   - `booking.return.planned`
   - `booking.returned`
   - `car.moved`
   - –∏ —Ç.–¥.

### 2. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ –≤ RentProg

1. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –±—Ä–æ–Ω—å –≤ RentProg
2. –ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –±—Ä–æ–Ω—å
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - –ü—Ä–∏—à–ª–æ –ª–∏ debug —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram?
   - –ü–æ—è–≤–∏–ª–∞—Å—å –ª–∏ –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ `events`?
   - –ü–æ—è–≤–∏–ª–æ—Å—å –ª–∏ execution –≤ n8n?

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Debug —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram

Debug –Ω–æ–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ Telegram. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –ö–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –æ—Ç RentProg?
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–∏ —Ñ–æ—Ä–º–∞—Ç –æ–∂–∏–¥–∞–µ–º–æ–º—É?
- –ï—Å—Ç—å –ª–∏ –ø–æ–ª—è `branch`, `type`, `payload`?

### 4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
tail -f /var/log/nginx/webhook-access.log
```

–°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ –≤ RentProg –∏ –Ω–∞–±–ª—é–¥–∞–π—Ç–µ, –ø—Ä–∏—Ö–æ–¥–∏—Ç –ª–∏ –∑–∞–ø—Ä–æ—Å.

---

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|-----------|--------|------------|
| HTTPS | ‚úÖ | –†–∞–±–æ—Ç–∞–µ—Ç |
| Nginx | ‚úÖ | –ü—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã |
| n8n Workflow | ‚úÖ | –ê–∫—Ç–∏–≤–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç |
| –ë–î –∑–∞–ø–∏—Å–∏ | ‚úÖ | –ó–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è |
| –†–µ–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è | ‚ö†Ô∏è | –ù–µ –Ω–∞–π–¥–µ–Ω—ã –≤ –ë–î |

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ RentProg** - –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã –ª–∏ –≤–µ–±—Ö—É–∫–∏ –∏ —Å–æ–±—ã—Ç–∏—è
2. **–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –ø—Ä–∏—Ö–æ–¥–∏—Ç –ª–∏ –æ–Ω–æ
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Debug —Å–æ–æ–±—â–µ–Ω–∏—è** - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

**–í—ã–≤–æ–¥:** –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü—Ä–æ–±–ª–µ–º–∞, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö RentProg (–Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è) –∏–ª–∏ —Å–æ–±—ã—Ç–∏—è –ø—Ä–æ—Å—Ç–æ –µ—â–µ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∏.

