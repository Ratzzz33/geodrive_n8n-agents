# üìä –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–ï–¢: –ê–Ω–∞–ª–∏–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è workflow #5729

**Execution ID:** 5729  
**Workflow:** RentProg Car States Reconciliation  
**–°—Ç–∞—Ç—É—Å:** ‚ùå ERROR  
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 2025-11-10 13:12:25 (Tbilisi time)  
**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 3.8 —Å–µ–∫—É–Ω–¥—ã

---

## ‚úÖ –ì–õ–ê–í–ù–´–ô –í–´–í–û–î

**–î–∞–Ω–Ω—ã–µ –ù–ï –±—ã–ª–∏ –∑–∞—Ç–µ—Ä—Ç—ã** - workflow —É–ø–∞–ª —Å –æ—à–∏–±–∫–æ–π –î–û –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è UPDATE –∑–∞–ø—Ä–æ—Å–æ–≤.

---

## üî¥ –û–®–ò–ë–ö–ê

**–£–∑–µ–ª:** "Apply Updates"  
**–û—à–∏–±–∫–∞:** `Cannot read properties of undefined (reading 'match')`  
**Stack trace:** Postgres node –ø—ã—Ç–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å `undefined.sqlQuery.match()`

**–ü—Ä–∏—á–∏–Ω–∞:**
1. "Generate SQL Updates" –≤–µ—Ä–Ω—É–ª `{ noUpdates: true, ... }` (–±–µ–∑ –ø–æ–ª—è `sqlQuery`)
2. "Apply Updates" –ø—ã—Ç–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å `{{ $json.sqlQuery }}`
3. `$json.sqlQuery` = `undefined`
4. Postgres —É–∑–µ–ª –≤—ã–∑—ã–≤–∞–µ—Ç `undefined.match()` ‚Üí –æ—à–∏–±–∫–∞

---

## üìã –¶–ï–ü–û–ß–ö–ê –í–´–ü–û–õ–ù–ï–ù–ò–Ø

### ‚úÖ –£—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ (10 —É–∑–ª–æ–≤):
1. Daily at 04:00 Tbilisi
2. Get Token Tbilisi/Batumi/Kutaisi/Service (4 —Ç–æ–∫–µ–Ω–∞)
3. Get Cars Tbilisi/Batumi/Kutaisi/Service (126 –º–∞—à–∏–Ω)
4. Flatten Tbilisi/Batumi/Kutaisi/Service
5. Merge All API Cars (126 –º–∞—à–∏–Ω –æ–±—ä–µ–¥–∏–Ω–µ–Ω–æ)
6. Upsert Snapshot (–¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã)
7. Compute Diff (SQL) (–Ω–∞–π–¥–µ–Ω–æ 122 —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è)
8. Prepare Updates (–æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ –¥–æ 5 —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π)
9. If Has Changes (hasChanges: true)
10. Generate SQL Updates (–≤–µ—Ä–Ω—É–ª noUpdates: true)

### ‚ùå –û—à–∏–±–∫–∞ (1 —É–∑–µ–ª):
11. **Apply Updates** - `Cannot read properties of undefined (reading 'match')`

### ‚è≠Ô∏è –ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ (2 —É–∑–ª–∞):
12. Format Alert
13. Send Telegram Alert

---

## üîç –ü–†–û–ë–õ–ï–ú–ê #1: NULL –≤ snapshot –¥–ª—è plate –∏ state

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- **–í—Å–µ–≥–æ –º–∞—à–∏–Ω –≤ snapshot:** 126
- **–ë–µ–∑ plate (NULL/–ø—É—Å—Ç–æ):** 122 (96.8%)
- **–ë–µ–∑ state (NULL/–ø—É—Å—Ç–æ):** 122 (96.8%)

### –ü—Ä–∏—á–∏–Ω–∞:
–í —É–∑–ª–µ **"Upsert Snapshot"** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
```sql
'{{ $json.number }}'  -- –¥–ª—è plate
'{{ $json.state }}'   -- –¥–ª—è state
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ –≤ API —ç—Ç–∏ –ø–æ–ª—è:
- –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç ‚Üí n8n –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É `''` –∏–ª–∏ NULL
- –ü—É—Å—Ç—ã–µ ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ `''` –∏–ª–∏ NULL
- `null` ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è NULL

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í snapshot —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è NULL –¥–ª—è plate –∏ state, —Ö–æ—Ç—è –≤ –ë–î —ç—Ç–∏ –ø–æ–ª—è –µ—Å—Ç—å (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ `restore_cars_from_rentprog.mjs`).

### –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π:
```
RentProg ID: 61936 (Toyota Camry)
  snapshot_plate: NULL  vs  db_plate: "ZR174ZR"  ‚Üê —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ
  snapshot_state: NULL  vs  db_state: "1"         ‚Üê —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ

RentProg ID: 64194 (Hyundai Tucson)
  snapshot_plate: NULL  vs  db_plate: "QQ325EQ"  ‚Üê —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ
  snapshot_state: NULL  vs  db_state: "1"         ‚Üê —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ
```

**–í—ã–≤–æ–¥:** –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –ª–æ–∂–Ω—ã–µ - –≤ snapshot NULL, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ API —ç—Ç–∏ –ø–æ–ª—è –ø—É—Å—Ç—ã–µ/–æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç, –Ω–æ –≤ –ë–î –æ–Ω–∏ –µ—Å—Ç—å (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã).

---

## üîç –ü–†–û–ë–õ–ï–ú–ê #2: –°—Ç—Ä–æ–∫–∞ "null" –≤–º–µ—Å—Ç–æ NULL

### –ù–∞–π–¥–µ–Ω–æ 5 —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π:
1. **54914** (RR942LR, KIA Sportage) - `engine_power: snapshot="null"` (—Å—Ç—Ä–æ–∫–∞!) vs `db=null`
2. **54612** (PJ756PJ, Hyundai Tucson Silver) - `engine_power: snapshot="null"` (—Å—Ç—Ä–æ–∫–∞!) vs `db=null`
3. **52138** (KK992RK, Ford Fusion) - `engine_power: snapshot="null"` (—Å—Ç—Ä–æ–∫–∞!) vs `db=null`
4. **63338** (GG668ZG, Hyundai Tucson) - `engine_power: snapshot="null"` (—Å—Ç—Ä–æ–∫–∞!) vs `db=null`
5. **68353** (TS078TT, Kia Soul) - `engine_power: snapshot="null"` + `engine_capacity: snapshot="null"` vs `db=null`

### –ü—Ä–∏—á–∏–Ω–∞:
–í SQL –∑–∞–ø—Ä–æ—Å–µ "Upsert Snapshot" –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `{{ $json.engine_power }}`. –ï—Å–ª–∏ –≤ API –ø–æ–ª–µ `null`, —Ç–æ n8n –º–æ–∂–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –µ–≥–æ –∫–∞–∫ —Å—Ç—Ä–æ–∫—É `"null"` –≤–º–µ—Å—Ç–æ SQL NULL.

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
1. **"Compute Diff (SQL)"** –Ω–∞—Ö–æ–¥–∏—Ç —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ: `"null"` (—Å—Ç—Ä–æ–∫–∞) IS DISTINCT FROM `null` (NULL)
2. **"Prepare Updates"** –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ `fieldsToUpdate` —Å `snapshotValue: "null"` (—Å—Ç—Ä–æ–∫–∞)
3. **"Generate SQL Updates"** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
   - `f.snapshotValue === null` ‚Üí **false** (—ç—Ç–æ —Å—Ç—Ä–æ–∫–∞ `"null"`)
   - `f.snapshotValue === ''` ‚Üí **false** (—ç—Ç–æ —Å—Ç—Ä–æ–∫–∞ `"null"`)
   - `String(f.snapshotValue).trim()` ‚Üí `"null"` ‚Üí –Ω–µ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
   - –ü—ã—Ç–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —á–∏—Å–ª–æ: `Number("null")` ‚Üí `NaN`
   - –í –∏—Ç–æ–≥–µ –≤—Å–µ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤—ã–≤–∞–µ—Ç—Å—è, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `noUpdates: true`

---

## üîç –ü–†–û–ë–õ–ï–ú–ê #3: –û—à–∏–±–∫–∞ –≤ "Apply Updates"

### –û—à–∏–±–∫–∞:
```
TypeError: Cannot read properties of undefined (reading 'match')
at executeQuery.operation.ts:138:27
```

### –ü—Ä–∏—á–∏–Ω–∞:
1. **"Generate SQL Updates"** –≤–µ—Ä–Ω—É–ª:
   ```json
   {
     "hasChanges": true,
     "totalDiscrepancies": 5,
     "totalUpdates": 5,
     "noUpdates": true,  ‚Üê –∫–ª—é—á–µ–≤–æ–π —Ñ–ª–∞–≥
     "discrepancies": [...],
     "updates": [...]
   }
   ```
   **–ù–û –±–µ–∑ –ø–æ–ª—è `sqlQuery`** (–ø–æ—Ç–æ–º—É —á—Ç–æ –≤—Å–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω—ã)

2. **"Apply Updates"** –ø—ã—Ç–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å:
   ```sql
   {{ $json.sqlQuery }}  -- undefined!
   ```

3. Postgres —É–∑–µ–ª –ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–∑–≤–∞—Ç—å `undefined.match()` –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ SQL ‚Üí –æ—à–∏–±–∫–∞

### –ü–æ—á–µ–º—É –Ω–µ—Ç sqlQuery:
- –í—Å–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±—ã–ª–∏ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω—ã –≤ "Generate SQL Updates"
- –ü–æ—Ç–æ–º—É —á—Ç–æ `snapshotValue: "null"` (—Å—Ç—Ä–æ–∫–∞) –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ –ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
- –ò –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ –∫–∞–∫ —á–∏—Å–ª–æ (Number("null") = NaN)

---

## üìä –î–ï–¢–ê–õ–¨–ù–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê

### –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –ø–æ —ç—Ç–∞–ø–∞–º:

#### 1. "Compute Diff (SQL)" - –Ω–∞–π–¥–µ–Ω–æ 122 —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è
- **–¢–∏–ø—ã —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π:**
  - `snapshot_plate: NULL` vs `db_plate: "–∑–Ω–∞—á–µ–Ω–∏–µ"` - **~120 –º–∞—à–∏–Ω**
  - `snapshot_state: NULL` vs `db_state: "–∑–Ω–∞—á–µ–Ω–∏–µ"` - **~120 –º–∞—à–∏–Ω**
  - `snapshot_company: "9247"` vs `db_company: null` - **–Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∞—à–∏–Ω**
  - `snapshot_engine_power: "null"` vs `db_engine_power: null` - **5 –º–∞—à–∏–Ω**

#### 2. "Prepare Updates" - –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ –¥–æ 5 —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π
- **–ü—Ä–∏—á–∏–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:** –õ–æ–≥–∏–∫–∞ `normalize()` –≤ "Prepare Updates" –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç NULL –∑–Ω–∞—á–µ–Ω–∏—è
- **–û—Å—Ç–∞–ª–æ—Å—å:** –¢–æ–ª—å–∫–æ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è —Å–æ —Å—Ç—Ä–æ–∫–æ–π `"null"` (–Ω–µ NULL!)

#### 3. "Generate SQL Updates" - 0 –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- **–ü—Ä–∏—á–∏–Ω–∞:** –í—Å–µ 5 —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω—ã (—Å—Ç—Ä–æ–∫–∞ `"null"` –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** `noUpdates: true`, `sqlQuery` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

---

## üîç –ü–û–ß–ï–ú–£ –†–ê–°–•–û–ñ–î–ï–ù–ò–Ø –õ–û–ñ–ù–´–ï

### 1. NULL –≤ snapshot vs –∑–Ω–∞—á–µ–Ω–∏—è –≤ –ë–î
**–ü—Ä–∏—á–∏–Ω–∞:** 
- Snapshot —Å–æ–∑–¥–∞–Ω –∏–∑ API, –≥–¥–µ `number` –∏ `state` –º–æ–≥—É—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º–∏/–æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å
- –ë–î –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç `restore_cars_from_rentprog.mjs`, –≥–¥–µ —ç—Ç–∏ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
- **–í—ã–≤–æ–¥:** –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –ª–æ–∂–Ω—ã–µ - snapshot –æ—Ç—Ä–∞–∂–∞–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ API (–ø—É—Å—Ç—ã–µ –ø–æ–ª—è), –∞ –ë–î —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### 2. –°—Ç—Ä–æ–∫–∞ "null" vs NULL
**–ü—Ä–∏—á–∏–Ω–∞:**
- –í API –ø–æ–ª–µ `engine_power: null` (JSON null)
- n8n —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–∞–∫ —Å—Ç—Ä–æ–∫—É `"null"` –≤ snapshot
- –í –ë–î —ç—Ç–æ `NULL` (SQL NULL)
- **–í—ã–≤–æ–¥:** –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –ª–æ–∂–Ω—ã–µ - —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö

---

## ‚úÖ –í–´–í–û–î–´

### 1. –î–∞–Ω–Ω—ã–µ –ù–ï –∑–∞—Ç–µ—Ä—Ç—ã ‚úÖ
- Workflow —É–ø–∞–ª –î–û –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è UPDATE –∑–∞–ø—Ä–æ—Å–æ–≤
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î –æ—Å—Ç–∞–ª–∏—Å—å –Ω–µ—Ç—Ä–æ–Ω—É—Ç—ã–º–∏

### 2. Workflow –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ ‚ùå
- –£–ø–∞–ª –Ω–∞ —É–∑–ª–µ "Apply Updates"
- –£–∑–ª—ã "Format Alert" –∏ "Send Telegram Alert" –Ω–µ –≤—ã–ø–æ–ª–Ω–∏–ª–∏—Å—å

### 3. –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –ª–æ–∂–Ω—ã–µ ‚ö†Ô∏è
- **122 —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è** - —ç—Ç–æ NULL –≤ snapshot vs –∑–Ω–∞—á–µ–Ω–∏—è –≤ –ë–î (snapshot –æ—Ç—Ä–∞–∂–∞–µ—Ç API, –ë–î –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞)
- **5 —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π** - —ç—Ç–æ —Å—Ç—Ä–æ–∫–∞ `"null"` vs NULL (–ø—Ä–æ–±–ª–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–∏–ø–æ–≤)

### 4. –ù—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å üîß
1. **"Upsert Snapshot":** –ù–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å NULL –¥–ª—è plate/state, –µ—Å–ª–∏ –≤ API –ø—É—Å—Ç–æ
2. **"Prepare Updates":** –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É `"null"` –∫–∞–∫ NULL
3. **"Generate SQL Updates":** –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É `"null"` –∫–∞–∫ NULL
4. **"Apply Updates":** –ü—Ä–æ–ø—É—Å–∫–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –µ—Å–ª–∏ `sqlQuery` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

---

## üìù –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:
1. ‚úÖ **–î–∞–Ω–Ω—ã–µ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** - –Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞—Ç–µ—Ä—Ç–æ
2. ‚ö†Ô∏è **–û—á–∏—Å—Ç–∏—Ç—å snapshot** - `TRUNCATE rentprog_car_states_snapshot;` (—á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å —Å—Ç–∞—Ä—ã–µ NULL)
3. üîß **–ò—Å–ø—Ä–∞–≤–∏—Ç—å workflow** - –¥–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Å—Ç—Ä–æ–∫–∏ `"null"` –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è `sqlQuery`

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å "Upsert Snapshot" - –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å NULL –¥–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
2. –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö (—Å—Ç—Ä–æ–∫–∞ "null" ‚Üí NULL)
3. –î–æ–±–∞–≤–∏—Ç—å –∑–∞—â–∏—Ç—É –≤ "Apply Updates" –æ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è sqlQuery

---

**–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω:** 2025-11-10 13:15:00 (Tbilisi time)  
**–§–∞–π–ª:** `setup/final_report_workflow_5729.md`

